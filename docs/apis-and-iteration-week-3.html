<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 API’s and Iteration (week 3) | My Bookdown Demo</title>
  <meta name="description" content="This is an example of using the bookdown package. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 API’s and Iteration (week 3) | My Bookdown Demo" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an example of using the bookdown package. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 API’s and Iteration (week 3) | My Bookdown Demo" />
  
  <meta name="twitter:description" content="This is an example of using the bookdown package. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Tess Noble Strohm" />


<meta name="date" content="2023-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-munging-week-3.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>My Intro</a></li>
<li class="chapter" data-level="1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html"><i class="fa fa-check"></i><b>1</b> API’s and Iteration (week 3)</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#lesson-objectives"><i class="fa fa-check"></i><b>1.0.1</b> Lesson Objectives</a></li>
<li class="chapter" data-level="1.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#apis"><i class="fa fa-check"></i><b>1.1</b> APIs</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#nps-visitation-data"><i class="fa fa-check"></i><b>1.1.1</b> NPS Visitation Data</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#functions"><i class="fa fa-check"></i><b>1.2</b> Functions</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#functionize-api-pulls"><i class="fa fa-check"></i><b>1.2.1</b> Functionize API Pulls</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#function-defaults"><i class="fa fa-check"></i><b>1.3</b> Function Defaults</a></li>
<li class="chapter" data-level="1.4" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#iterations"><i class="fa fa-check"></i><b>1.4</b> Iterations</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#for-loops"><i class="fa fa-check"></i><b>1.4.1</b> For loops</a></li>
<li class="chapter" data-level="1.4.2" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#exercise-6"><i class="fa fa-check"></i><b>1.4.2</b> Exercise #6</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#mapping"><i class="fa fa-check"></i><b>1.5</b> Mapping</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="apis-and-iteration-week-3.html"><a href="apis-and-iteration-week-3.html#exercise-7"><i class="fa fa-check"></i><b>1.5.1</b> Exercise #7</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html"><i class="fa fa-check"></i><b>2</b> Data Munging (week 3)</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#lesson-objectives-1"><i class="fa fa-check"></i><b>2.0.1</b> Lesson Objectives</a></li>
<li class="chapter" data-level="2.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#pulling-in-necessary-packages-and-data-sets"><i class="fa fa-check"></i><b>2.1</b> Pulling in necessary packages and data sets</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exercise-1-1"><i class="fa fa-check"></i><b>2.1.1</b> Exercise #1</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exploring-our-data"><i class="fa fa-check"></i><b>2.2</b> Exploring our data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exercise-2-1"><i class="fa fa-check"></i><b>2.2.1</b> Exercise #2</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#pivoting"><i class="fa fa-check"></i><b>2.3</b> Pivoting</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exercise-3-1"><i class="fa fa-check"></i><b>2.3.1</b> Exercise #3</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#joining"><i class="fa fa-check"></i><b>2.4</b> Joining</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exercise-4-1"><i class="fa fa-check"></i><b>2.4.1</b> Exercise #4</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-munging-week-3.html"><a href="data-munging-week-3.html#exercise-5-1"><i class="fa fa-check"></i><b>2.4.2</b> Exercise #5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html"><i class="fa fa-check"></i><b>3</b> Denoucement (week 3)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#lesson-objectives-2"><i class="fa fa-check"></i><b>3.1</b> Lesson Objectives:</a></li>
<li class="chapter" data-level="3.2" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#streaflow-datasets"><i class="fa fa-check"></i><b>3.2</b> Streaflow Datasets</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#usgs-dataretrieval-r-package"><i class="fa fa-check"></i><b>3.2.1</b> USGS <code>dataRetrieval</code> R package</a></li>
<li class="chapter" data-level="3.2.2" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#cdwrs-api"><i class="fa fa-check"></i><b>3.2.2</b> CDWR’s API</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#exercise-1-2"><i class="fa fa-check"></i><b>3.3</b> Exercise #1</a></li>
<li class="chapter" data-level="3.4" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#exercise-2-2"><i class="fa fa-check"></i><b>3.4</b> Exercise #2</a></li>
<li class="chapter" data-level="3.5" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#exercise-3-2"><i class="fa fa-check"></i><b>3.5</b> Exercise #3</a></li>
<li class="chapter" data-level="3.6" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#exercise-4-2"><i class="fa fa-check"></i><b>3.6</b> Exercise #4</a></li>
<li class="chapter" data-level="3.7" data-path="denoucement-week-3.html"><a href="denoucement-week-3.html#exercise-5-2"><i class="fa fa-check"></i><b>3.7</b> Exercise #5</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html"><i class="fa fa-check"></i><b>4</b> Get Spacial (week 4)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#vector-data"><i class="fa fa-check"></i><b>4.1</b> Vector Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#us-census-spatial-data-with-tigris"><i class="fa fa-check"></i><b>4.1.1</b> US Census spatial data with <code>tigris</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#species-occurrence-data-with-rgbif"><i class="fa fa-check"></i><b>4.1.2</b> Species Occurrence data with <span><code>rgbif</code></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#exercise-1-3"><i class="fa fa-check"></i><b>4.1.3</b> Exercise #1</a></li>
<li class="chapter" data-level="4.1.4" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#snotel-data-with-soildb"><i class="fa fa-check"></i><b>4.1.4</b> SNOTEL data with <span><code>soilDB</code></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#exercise-2-3"><i class="fa fa-check"></i><b>4.1.5</b> Exercise #2</a></li>
<li class="chapter" data-level="4.1.6" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#exercise-3-3"><i class="fa fa-check"></i><b>4.1.6</b> Exercise #3</a></li>
<li class="chapter" data-level="4.1.7" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#save-vector-data"><i class="fa fa-check"></i><b>4.1.7</b> Save Vector Data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#raster-data"><i class="fa fa-check"></i><b>4.2</b> Raster Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#elevation-data-with-elevatr"><i class="fa fa-check"></i><b>4.2.1</b> Elevation data with <code>elevatr</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#exercise-4-3"><i class="fa fa-check"></i><b>4.2.2</b> Exercise #4</a></li>
<li class="chapter" data-level="4.2.3" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#landcover-data"><i class="fa fa-check"></i><b>4.2.3</b> Landcover data</a></li>
<li class="chapter" data-level="4.2.4" data-path="get-spacial-week-4.html"><a href="get-spacial-week-4.html#exercise-5-3"><i class="fa fa-check"></i><b>4.2.4</b> Exercise #5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html"><i class="fa fa-check"></i><b>5</b> Spacial Analysis (week 4)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#load-in-spatial-data"><i class="fa fa-check"></i><b>5.1</b> Load in spatial data</a></li>
<li class="chapter" data-level="5.2" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#distance-calculations"><i class="fa fa-check"></i><b>5.2</b> Distance Calculations</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-1-4"><i class="fa fa-check"></i><b>5.2.1</b> Exercise #1</a></li>
<li class="chapter" data-level="5.2.2" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-2-4"><i class="fa fa-check"></i><b>5.2.2</b> Exercise #2</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#buffers"><i class="fa fa-check"></i><b>5.3</b> Buffers</a></li>
<li class="chapter" data-level="5.4" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#spatial-intersect"><i class="fa fa-check"></i><b>5.4</b> Spatial Intersect</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-3-4"><i class="fa fa-check"></i><b>5.4.1</b> Exercise #3</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#raster-reclassification"><i class="fa fa-check"></i><b>5.5</b> Raster Reclassification</a></li>
<li class="chapter" data-level="5.6" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#focal-statistics"><i class="fa fa-check"></i><b>5.6</b> Focal Statistics</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-4-4"><i class="fa fa-check"></i><b>5.6.1</b> Exercise #4</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#raster-extract"><i class="fa fa-check"></i><b>5.7</b> Raster Extract</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-5-4"><i class="fa fa-check"></i><b>5.7.1</b> Exercise #5</a></li>
<li class="chapter" data-level="5.7.2" data-path="spacial-analysis-week-4.html"><a href="spacial-analysis-week-4.html#exercise-6-1"><i class="fa fa-check"></i><b>5.7.2</b> Exercise #6</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My Bookdown Demo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="apis-and-iteration-week-3" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> API’s and Iteration (week 3)<a href="apis-and-iteration-week-3.html#apis-and-iteration-week-3" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="lesson-objectives" class="section level3 hasAnchor" number="1.0.1">
<h3><span class="header-section-number">1.0.1</span> Lesson Objectives<a href="apis-and-iteration-week-3.html#lesson-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this lesson we will download data using an application programming interface (API), create our own functions, and iterate using <code>for</code> loops and <code>map()</code>. To fulfill these objectives we will be utilizing two park visitation data sets from the National Park Service (NPS): NPS-wide visitation data, and park unit-specific visitation data.</p>
<p>There are <strong>seven exercises</strong> in this lesson that must be completed.</p>
</div>
<div id="apis" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> APIs<a href="apis-and-iteration-week-3.html#apis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An API is software that acts as an intermediary between an online data warehouse (or server) and its users (or clients). As data scientists, APIs provide us a way to request clean and nicely-formatted data that the server will then send to our local computers, all within our RStudio console! To work with APIs, we will need to use two new packages: <code>httr</code>, which allows us to communicate with the API’s server, and <code>jsonlite</code>, which allows us to work with one of the most common API data formats, JSON. Let’s go ahead and load in our packages for this lesson:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="apis-and-iteration-week-3.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="apis-and-iteration-week-3.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-3"><a href="apis-and-iteration-week-3.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code></pre></div>
<div id="nps-visitation-data" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> NPS Visitation Data<a href="apis-and-iteration-week-3.html#nps-visitation-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This week, we will be exploring NPS visitor use data across the NPS system as a whole, and and across specific park units. Like many institutions, NPS has a server that stores all of this information (as well as many other things), and an API for users to be able to access it.</p>
<p>To utilize the NPS API in R, we first need to explore its <a href="https://irmaservices.nps.gov/">API’s data structure</a>. In almost every case, we use URLs to access specific data from APIs. To find the access URL for NPS visitation data, go to <a href="https://irmaservices.nps.gov/v3/rest/Stats/help">Stats Rest API - Documentation</a> (though not very intuitive, the NPS API calls its visitation data set “Stats”). Listed there you will see that all data associated with the “Stats” data set can be accessed using the base URL <a href="https://irmaservices.nps.gov/v3/rest/stats"><strong>https://irmaservices.nps.gov/v3/rest/stats</strong></a>. From there, you can tack on additional html text to access two different data sets: <strong>total/{year}</strong> and <strong>visitation</strong>.</p>
<p>For starters, let’s try accessing the <strong>total/{year}</strong>. This data set gives us total monthly visitation across all NPS park units, for a user-selected year:</p>
<p><a href="https://irmaservices.nps.gov/v3/rest/stats/total/%7BYEAR%7D" class="uri"><strong>https://irmaservices.nps.gov/v3/rest/stats/total/{YEAR}</strong></a></p>
<p>If you tried accessing that URL, you’ll have noticed it doesn’t take you anywhere. This is because the curly brackets {} signify locations in the URL that need to be updated by the user based on their specific needs. I’m curious about visitor use in my birth year, so let’s tweak the URL to access visitation data from 1992. In R, we can access this data using <code>httr</code>’s <code>GET()</code> function, replacing {YEAR} with 1992.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="apis-and-iteration-week-3.html#cb2-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/1992&quot;</span>)</span>
<span id="cb2-2"><a href="apis-and-iteration-week-3.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="apis-and-iteration-week-3.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># view raw_data</span></span>
<span id="cb2-4"><a href="apis-and-iteration-week-3.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(raw_data)</span></code></pre></div>
<p>Viewing the data set as-is, you can see it is not super human-readable. This is because data sent from APIs is typically packaged using JavaScript Object Notation (JSON).</p>
<p>To unpack the data, we will first need to use <code>httr</code>’s <code>content()</code> function. In this example, we want the data to be extracted as <em>text,</em> since this is a data table. Moreover, its encoding is listed as <em>UTF-8</em>. The encoding parameter can be found by opening our raw data set in our R console:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="apis-and-iteration-week-3.html#cb3-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="co"># lists &#39;UTF-8&#39;</span></span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/total/1992]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.42 kB</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="apis-and-iteration-week-3.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb5-2"><a href="apis-and-iteration-week-3.html#cb5-2" aria-hidden="true" tabindex="-1"></a>unpacked_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span></code></pre></div>
<p>Second, we need to transform this string of text, which is still in JSON formatting, into a data frame using <code>jsonlite</code>’s <code>fromJSON()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="apis-and-iteration-week-3.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb6-2"><a href="apis-and-iteration-week-3.html#cb6-2" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpacked_data)</span>
<span id="cb6-3"><a href="apis-and-iteration-week-3.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="apis-and-iteration-week-3.html#cb6-4" aria-hidden="true" tabindex="-1"></a>final_data</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1               6209285           10940618       NA       NA 1992
## 2      2               6010027           11931340       NA       NA 1992
## 3      3               6756902           15369139       NA       NA 1992
## 4      4               7255782           21458739       NA       NA 1992
## 5      5               7690763           26648530       NA       NA 1992
## 6      6               7593227           33284625       NA       NA 1992
## 7      7               8438755           41099305       NA       NA 1992
## 8      8               8056823           38625804       NA       NA 1992
## 9      9               7329755           26438266       NA       NA 1992
## 10    10               7105574           23616057       NA       NA 1992
## 11    11               6507805           14338165       NA       NA 1992
## 12    12               6702698           10943961       NA       NA 1992</code></pre>
<p>Hooray, you have now successfully pulled in an online data set using an API! 😁</p>
<div id="exercise-1" class="section level4 hasAnchor" number="1.1.1.1" style="color: maroon">
<h4><span class="header-section-number">1.1.1.1</span> Exercise #1<a href="apis-and-iteration-week-3.html#exercise-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Using the code above as a starting point, pull in monthly NPS-wide visitation data for the years 1980, 1999, and 2018.</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="apis-and-iteration-week-3.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a fucntion</span></span>
<span id="cb8-2"><a href="apis-and-iteration-week-3.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="apis-and-iteration-week-3.html#cb8-3" aria-hidden="true" tabindex="-1"></a>parkwide_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">year =</span> <span class="dv">2021</span>){</span>
<span id="cb8-4"><a href="apis-and-iteration-week-3.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/&quot;</span>, year))</span>
<span id="cb8-5"><a href="apis-and-iteration-week-3.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  unpacked_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb8-6"><a href="apis-and-iteration-week-3.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpacked_data)</span>
<span id="cb8-7"><a href="apis-and-iteration-week-3.html#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(final_data)</span>
<span id="cb8-8"><a href="apis-and-iteration-week-3.html#cb8-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-9"><a href="apis-and-iteration-week-3.html#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="apis-and-iteration-week-3.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#test &lt;- parkwide_visitation(year = 2021)</span></span>
<span id="cb8-11"><a href="apis-and-iteration-week-3.html#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="apis-and-iteration-week-3.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Pulling data from multiple years</span></span>
<span id="cb8-13"><a href="apis-and-iteration-week-3.html#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="apis-and-iteration-week-3.html#cb8-14" aria-hidden="true" tabindex="-1"></a>years <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1980</span>, <span class="dv">1999</span>, <span class="dv">2018</span>)</span>
<span id="cb8-15"><a href="apis-and-iteration-week-3.html#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="apis-and-iteration-week-3.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store each year&#39;s parkwide visitation data</span></span>
<span id="cb8-17"><a href="apis-and-iteration-week-3.html#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="apis-and-iteration-week-3.html#cb8-18" aria-hidden="true" tabindex="-1"></a>output_floop <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(years))</span>
<span id="cb8-19"><a href="apis-and-iteration-week-3.html#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="apis-and-iteration-week-3.html#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># The &quot;for loops&quot; functions: &quot;for each object listed in the &#39;years&#39; vector...&quot;, then the function we created above, then specifying that the years we are are the years listed, with the &quot;[i]&quot; telling it to do one year after the other (for &#39;i&#39;s&#39; years, put &#39;i&#39;s&#39; output)</span></span>
<span id="cb8-21"><a href="apis-and-iteration-week-3.html#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="apis-and-iteration-week-3.html#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(years)) {</span>
<span id="cb8-23"><a href="apis-and-iteration-week-3.html#cb8-23" aria-hidden="true" tabindex="-1"></a>  output_floop[[i]] <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> years[i])</span>
<span id="cb8-24"><a href="apis-and-iteration-week-3.html#cb8-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-25"><a href="apis-and-iteration-week-3.html#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="apis-and-iteration-week-3.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># bind them together into one dataframe</span></span>
<span id="cb8-27"><a href="apis-and-iteration-week-3.html#cb8-27" aria-hidden="true" tabindex="-1"></a>yrs_80_99_18 <span class="ot">&lt;-</span> output_floop <span class="sc">%&gt;%</span></span>
<span id="cb8-28"><a href="apis-and-iteration-week-3.html#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span></code></pre></div>
</div>
<div id="exercise-2" class="section level4 hasAnchor" number="1.1.1.2" style="color: maroon">
<h4><span class="header-section-number">1.1.1.2</span> Exercise #2<a href="apis-and-iteration-week-3.html#exercise-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Now, let’s explore the second NPS visitation data set, <a href="https://irmaservices.nps.gov/v3/rest/Stats/help">visitation</a>. This call pulls in monthly data for a specific park, across a specific time frame. Use your new API skills to pull in visitation data for Rocky Mountain National Park from 2010 through 2021, based on the API’s URL template. The unit code for Rocky Mountain National Park is ROMO. (Hint: an API URL can have multiple sections that need to be updated by the user.)</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="apis-and-iteration-week-3.html#cb9-1" aria-hidden="true" tabindex="-1"></a>rocky_raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url=</span><span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=ROMO&amp;startMonth=01&amp;startYear=2010&amp;endMonth=12&amp;endYear=2021&quot;</span>)</span>
<span id="cb9-2"><a href="apis-and-iteration-week-3.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="apis-and-iteration-week-3.html#cb9-3" aria-hidden="true" tabindex="-1"></a>rocky_unpacked_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(rocky_raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb9-4"><a href="apis-and-iteration-week-3.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="apis-and-iteration-week-3.html#cb9-5" aria-hidden="true" tabindex="-1"></a>rocky_final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(rocky_unpacked_data)</span></code></pre></div>
</div>
</div>
</div>
<div id="functions" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Functions<a href="apis-and-iteration-week-3.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You may find yourself thinking, <em>“Wow, exercise 1 was overkill!”</em> Indeed, you had to run several lines of code that were nearly identical to what was shown upstream; the only thing you needed to change from one year to the next was the year itself. This sort of redundant coding is not good coding practice. Instead of copying and pasting many coding steps over and over again and tweaking just a tiny portion of it, we can write <em>functions</em> that combine many coding steps into just one command. The benefits of reducing redundant code in this way are threefold. As Grolemund &amp; Wickham describe in their book, <a href="https://r4ds.had.co.nz/"><em>R for Data Science</em></a>:</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>It’s easier to see the intent of your code, because your eyes are drawn to what’s different, not what stays the same.</li>
<li>It’s easier to respond to changes in requirements. As your needs change, you only need to make changes in one place, rather than remembering to change every place that you copied-and-pasted the code.</li>
<li>You’re likely to have fewer bugs because each line of code is used in more places.</li>
</ol>
</blockquote>
<p><em>Functions</em> provide the option of changing just a minor part of the code base from one run to the next. Think of the <code>GET()</code> function in <code>httr</code>: it is a function that has code under-the-hood so that it isn’t necessary to write out the raw code each time we use it. Instead, we call out the function’s name (<code>GET()</code>), and the necessary argument within that function that tweaks the code to fit it to our needs (<code>url = "&lt;SOME_URL_WE_CHOOSE&gt;"</code>).</p>
<div id="functionize-api-pulls" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Functionize API Pulls<a href="apis-and-iteration-week-3.html#functionize-api-pulls" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s try making a function called <code>parkwide_visitation()</code> that pulls in NPS-wide visitation data for a year of choice. To develop a function requires specific formatting:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="apis-and-iteration-week-3.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&lt;NAME&gt; &lt;- function(&lt;ARGUMENTS&gt;){</span></span>
<span id="cb10-2"><a href="apis-and-iteration-week-3.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-3"><a href="apis-and-iteration-week-3.html#cb10-3" aria-hidden="true" tabindex="-1"></a> <span class="co"># &lt;ACTIONS&gt;</span></span>
<span id="cb10-4"><a href="apis-and-iteration-week-3.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-5"><a href="apis-and-iteration-week-3.html#cb10-5" aria-hidden="true" tabindex="-1"></a> <span class="co"># return(&lt;OUTPUT&gt;)</span></span>
<span id="cb10-6"><a href="apis-and-iteration-week-3.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="apis-and-iteration-week-3.html#cb10-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># }</span></span></code></pre></div>
<p>… where NAME is what we want to name the function; ARGUMENTS are the variables in the code that get “tweaked”; ACTIONS are the lines of code we want the function to perform (which includes our ARGUMENTS); and the OUTPUT is the object we want as the final outcome of running the function.</p>
<p>For <code>parkwide_visitation()</code>, we will use our upstream code as the basis for our function, but with a few minor yet extremely important tweaks:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="apis-and-iteration-week-3.html#cb11-1" aria-hidden="true" tabindex="-1"></a>parkwide_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(year){</span>
<span id="cb11-2"><a href="apis-and-iteration-week-3.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="apis-and-iteration-week-3.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pull in the data</span></span>
<span id="cb11-4"><a href="apis-and-iteration-week-3.html#cb11-4" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> </span>
<span id="cb11-5"><a href="apis-and-iteration-week-3.html#cb11-5" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># parse out year so that it can be chosen with the &quot;year&quot; argument, using paste0()</span></span>
<span id="cb11-6"><a href="apis-and-iteration-week-3.html#cb11-6" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/&quot;</span>, year))</span>
<span id="cb11-7"><a href="apis-and-iteration-week-3.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="apis-and-iteration-week-3.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb11-9"><a href="apis-and-iteration-week-3.html#cb11-9" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb11-10"><a href="apis-and-iteration-week-3.html#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="apis-and-iteration-week-3.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb11-12"><a href="apis-and-iteration-week-3.html#cb11-12" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_data)</span>
<span id="cb11-13"><a href="apis-and-iteration-week-3.html#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="apis-and-iteration-week-3.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(final_data)</span>
<span id="cb11-15"><a href="apis-and-iteration-week-3.html#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="apis-and-iteration-week-3.html#cb11-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In the above function, our first object, <code>raw_data</code>, now changes based on how we define our year argument. We accomplish this through <code>paste0()</code>, which takes listed objects, transforms them into characters (if they aren’t already), and concatenates them into a single character string. For example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="apis-and-iteration-week-3.html#cb12-1" aria-hidden="true" tabindex="-1"></a>my_sentence <span class="ot">&lt;-</span> <span class="st">&quot;I need at least&quot;</span></span>
<span id="cb12-2"><a href="apis-and-iteration-week-3.html#cb12-2" aria-hidden="true" tabindex="-1"></a>my_other_sentence <span class="ot">&lt;-</span> <span class="st">&quot;pints of ice cream a day&quot;</span></span>
<span id="cb12-3"><a href="apis-and-iteration-week-3.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="apis-and-iteration-week-3.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(my_sentence, <span class="st">&quot; &quot;</span>, <span class="dv">08</span>, <span class="st">&quot; &quot;</span>, my_other_sentence, <span class="st">&quot;!&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;I need at least 8 pints of ice cream a day!&quot;</code></pre>
<p>So, if we make <code>year = 2021</code> in our <code>parkwide_visitation()</code> function, the year object becomes the number 2021, which makes the <code>paste0()</code> output “<a href="https://irmaservices.nps.gov/v3/rest/stats/total/2021" class="uri">https://irmaservices.nps.gov/v3/rest/stats/total/2021</a>”, which subsequently pulls data for 2021. In other words, we can now pull visitation data for any year with just one line of code!</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="apis-and-iteration-week-3.html#cb14-1" aria-hidden="true" tabindex="-1"></a>pull_2018 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">2018</span>)</span>
<span id="cb14-2"><a href="apis-and-iteration-week-3.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="apis-and-iteration-week-3.html#cb14-3" aria-hidden="true" tabindex="-1"></a>pull_1980 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">1980</span>)</span>
<span id="cb14-4"><a href="apis-and-iteration-week-3.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="apis-and-iteration-week-3.html#cb14-5" aria-hidden="true" tabindex="-1"></a>pull_1992 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">1992</span>)</span>
<span id="cb14-6"><a href="apis-and-iteration-week-3.html#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="apis-and-iteration-week-3.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ... and so on!</span></span></code></pre></div>
<div id="exercise-3" class="section level4 hasAnchor" number="1.2.1.1" style="color: maroon">
<h4><span class="header-section-number">1.2.1.1</span> Exercise #3<a href="apis-and-iteration-week-3.html#exercise-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Create a function called <code>unit_visitation()</code> that pulls park-specific visitation data for any park, across any time frame. For a list of all park codes, download <a href="https://www.nps.gov/aboutus/foia/upload/NPS-Unit-List.xlsx">this spreadsheet</a>. (Hint 1: functions can have multiple arguments. Hint 2: what’s the difference between <code>05</code> and <code>"05"</code>?)</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="apis-and-iteration-week-3.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rocky_raw_data &lt;- httr::GET(url=&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=ROMO&amp;startMonth=01&amp;startYear=2010&amp;endMonth=12&amp;endYear=2021&quot;)</span></span>
<span id="cb15-2"><a href="apis-and-iteration-week-3.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="apis-and-iteration-week-3.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create unit_visitation function</span></span>
<span id="cb15-4"><a href="apis-and-iteration-week-3.html#cb15-4" aria-hidden="true" tabindex="-1"></a>unit_visitation <span class="ot">&lt;-</span></span>
<span id="cb15-5"><a href="apis-and-iteration-week-3.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(park,</span>
<span id="cb15-6"><a href="apis-and-iteration-week-3.html#cb15-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">start_month =</span> <span class="st">&quot;01&quot;</span>,</span>
<span id="cb15-7"><a href="apis-and-iteration-week-3.html#cb15-7" aria-hidden="true" tabindex="-1"></a>           start_year,</span>
<span id="cb15-8"><a href="apis-and-iteration-week-3.html#cb15-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">end_month =</span> <span class="st">&quot;12&quot;</span>,</span>
<span id="cb15-9"><a href="apis-and-iteration-week-3.html#cb15-9" aria-hidden="true" tabindex="-1"></a>           end_year){</span>
<span id="cb15-10"><a href="apis-and-iteration-week-3.html#cb15-10" aria-hidden="true" tabindex="-1"></a>    initial_data <span class="ot">&lt;-</span></span>
<span id="cb15-11"><a href="apis-and-iteration-week-3.html#cb15-11" aria-hidden="true" tabindex="-1"></a>      httr<span class="sc">::</span><span class="fu">GET</span>(</span>
<span id="cb15-12"><a href="apis-and-iteration-week-3.html#cb15-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">url =</span> <span class="fu">paste0</span>(</span>
<span id="cb15-13"><a href="apis-and-iteration-week-3.html#cb15-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=&quot;</span>,</span>
<span id="cb15-14"><a href="apis-and-iteration-week-3.html#cb15-14" aria-hidden="true" tabindex="-1"></a>          park,</span>
<span id="cb15-15"><a href="apis-and-iteration-week-3.html#cb15-15" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;&amp;startMonth=&quot;</span>,</span>
<span id="cb15-16"><a href="apis-and-iteration-week-3.html#cb15-16" aria-hidden="true" tabindex="-1"></a>          start_month,</span>
<span id="cb15-17"><a href="apis-and-iteration-week-3.html#cb15-17" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;&amp;startYear=&quot;</span>,</span>
<span id="cb15-18"><a href="apis-and-iteration-week-3.html#cb15-18" aria-hidden="true" tabindex="-1"></a>          start_year,</span>
<span id="cb15-19"><a href="apis-and-iteration-week-3.html#cb15-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;&amp;endMonth=&quot;</span>,</span>
<span id="cb15-20"><a href="apis-and-iteration-week-3.html#cb15-20" aria-hidden="true" tabindex="-1"></a>          end_month,</span>
<span id="cb15-21"><a href="apis-and-iteration-week-3.html#cb15-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;&amp;endYear=&quot;</span>,</span>
<span id="cb15-22"><a href="apis-and-iteration-week-3.html#cb15-22" aria-hidden="true" tabindex="-1"></a>          end_year))</span>
<span id="cb15-23"><a href="apis-and-iteration-week-3.html#cb15-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-24"><a href="apis-and-iteration-week-3.html#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to text</span></span>
<span id="cb15-25"><a href="apis-and-iteration-week-3.html#cb15-25" aria-hidden="true" tabindex="-1"></a>    extracted_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(initial_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb15-26"><a href="apis-and-iteration-week-3.html#cb15-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-27"><a href="apis-and-iteration-week-3.html#cb15-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># parse text from JSON to data frame  </span></span>
<span id="cb15-28"><a href="apis-and-iteration-week-3.html#cb15-28" aria-hidden="true" tabindex="-1"></a>    last_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_data)</span>
<span id="cb15-29"><a href="apis-and-iteration-week-3.html#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(last_data)</span>
<span id="cb15-30"><a href="apis-and-iteration-week-3.html#cb15-30" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
</div>
<div id="exercise-4" class="section level4 hasAnchor" number="1.2.1.2" style="color: maroon">
<h4><span class="header-section-number">1.2.1.2</span> Exercise #4<a href="apis-and-iteration-week-3.html#exercise-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Using <code>unit_visitation()</code>, pull in visitation data for Rocky Mountain National Park (ROMO), Everglades National Park (EVER), and Theodore Roosevelt National Park (THRO) from 1990 through 2021.</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="apis-and-iteration-week-3.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rocky Mtn</span></span>
<span id="cb16-2"><a href="apis-and-iteration-week-3.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;ROMO&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1990&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode          UnitName Year
## 1       1                 10956              53565     ROMO Rocky Mountain NP 1990
## 2       2                  9343              49896     ROMO Rocky Mountain NP 1990
## 3       3                  7247              65280     ROMO Rocky Mountain NP 1990
## 4       4                  4681              60274     ROMO Rocky Mountain NP 1990
## 5       5                 11465             108881     ROMO Rocky Mountain NP 1990
## 6       6                 17173             435279     ROMO Rocky Mountain NP 1990
## 7       7                 28031             560806     ROMO Rocky Mountain NP 1990
## 8       8                 30676             646018     ROMO Rocky Mountain NP 1990
## 9       9                 13162             392873     ROMO Rocky Mountain NP 1990
## 10     10                  9608             164130     ROMO Rocky Mountain NP 1990
## 11     11                  5749              73064     ROMO Rocky Mountain NP 1990
## 12     12                  5845              37257     ROMO Rocky Mountain NP 1990
## 13      1                  8071              50910     ROMO Rocky Mountain NP 1991
## 14      2                  6467              57547     ROMO Rocky Mountain NP 1991
## 15      3                  8492              56241     ROMO Rocky Mountain NP 1991
## 16      4                  6231              67986     ROMO Rocky Mountain NP 1991
## 17      5                 13124             118351     ROMO Rocky Mountain NP 1991
## 18      6                 18645             434810     ROMO Rocky Mountain NP 1991
## 19      7                 28663             614118     ROMO Rocky Mountain NP 1991
## 20      8                 25541             642734     ROMO Rocky Mountain NP 1991
## 21      9                 19042             385524     ROMO Rocky Mountain NP 1991
## 22     10                  9185             237608     ROMO Rocky Mountain NP 1991
## 23     11                  2815              43136     ROMO Rocky Mountain NP 1991
## 24     12                  5754              42816     ROMO Rocky Mountain NP 1991
## 25      1                  9398              60038     ROMO Rocky Mountain NP 1992
## 26      2                  9674              48476     ROMO Rocky Mountain NP 1992
## 27      3                  6444              58478     ROMO Rocky Mountain NP 1992
## 28      4                  4797              80217     ROMO Rocky Mountain NP 1992
## 29      5                 11308             160788     ROMO Rocky Mountain NP 1992
## 30      6                 15198             408630     ROMO Rocky Mountain NP 1992
## 31      7                 28690             606764     ROMO Rocky Mountain NP 1992
## 32      8                 24688             623634     ROMO Rocky Mountain NP 1992
## 33      9                 20790             440843     ROMO Rocky Mountain NP 1992
## 34     10                 12764             218570     ROMO Rocky Mountain NP 1992
## 35     11                  4346              47490     ROMO Rocky Mountain NP 1992
## 36     12                  5778              34940     ROMO Rocky Mountain NP 1992
## 37      1                  9015              53780     ROMO Rocky Mountain NP 1993
## 38      2                  8490              39962     ROMO Rocky Mountain NP 1993
## 39      3                  7375              52511     ROMO Rocky Mountain NP 1993
## 40      4                  5256              65790     ROMO Rocky Mountain NP 1993
## 41      5                  7498             120708     ROMO Rocky Mountain NP 1993
## 42      6                 20483             424670     ROMO Rocky Mountain NP 1993
## 43      7                 31510             623451     ROMO Rocky Mountain NP 1993
## 44      8                 36845             654327     ROMO Rocky Mountain NP 1993
## 45      9                 22219             423570     ROMO Rocky Mountain NP 1993
## 46     10                 11741             230972     ROMO Rocky Mountain NP 1993
## 47     11                  4239              48776     ROMO Rocky Mountain NP 1993
## 48     12                  5854              41825     ROMO Rocky Mountain NP 1993
## 49      1                  9492              66336     ROMO Rocky Mountain NP 1994
## 50      2                  8488              46474     ROMO Rocky Mountain NP 1994
## 51      3                  7359              64501     ROMO Rocky Mountain NP 1994
## 52      4                  5214              73383     ROMO Rocky Mountain NP 1994
## 53      5                 12081             140442     ROMO Rocky Mountain NP 1994
## 54      6                 16073             454741     ROMO Rocky Mountain NP 1994
## 55      7                 26679             637208     ROMO Rocky Mountain NP 1994
## 56      8                 38247             691826     ROMO Rocky Mountain NP 1994
## 57      9                 35752             486600     ROMO Rocky Mountain NP 1994
## 58     10                 12793             200637     ROMO Rocky Mountain NP 1994
## 59     11                  6187              65256     ROMO Rocky Mountain NP 1994
## 60     12                  6880              41046     ROMO Rocky Mountain NP 1994
## 61      1                  6110              72264     ROMO Rocky Mountain NP 1995
## 62      2                  6110              55526     ROMO Rocky Mountain NP 1995
## 63      3                  4300              62216     ROMO Rocky Mountain NP 1995
## 64      4                  3040              63517     ROMO Rocky Mountain NP 1995
## 65      5                  6820             107774     ROMO Rocky Mountain NP 1995
## 66      6                  9309             401034     ROMO Rocky Mountain NP 1995
## 67      7                 15637             643304     ROMO Rocky Mountain NP 1995
## 68      8                 35836             718453     ROMO Rocky Mountain NP 1995
## 69      9                 18281             404990     ROMO Rocky Mountain NP 1995
## 70     10                 11162             237056     ROMO Rocky Mountain NP 1995
## 71     11                  7043              69520     ROMO Rocky Mountain NP 1995
## 72     12                  6630              42515     ROMO Rocky Mountain NP 1995
## 73      1                  9408              50604     ROMO Rocky Mountain NP 1996
## 74      2                  8293              56462     ROMO Rocky Mountain NP 1996
## 75      3                  7368              69517     ROMO Rocky Mountain NP 1996
## 76      4                  7317              73462     ROMO Rocky Mountain NP 1996
## 77      5                 13786             177831     ROMO Rocky Mountain NP 1996
## 78      6                 24138             442730     ROMO Rocky Mountain NP 1996
## 79      7                 34807             669291     ROMO Rocky Mountain NP 1996
## 80      8                 36317             658613     ROMO Rocky Mountain NP 1996
## 81      9                 26050             405585     ROMO Rocky Mountain NP 1996
## 82     10                 12166             194353     ROMO Rocky Mountain NP 1996
## 83     11                  5904              61799     ROMO Rocky Mountain NP 1996
## 84     12                  6476              63508     ROMO Rocky Mountain NP 1996
## 85      1                  9041              60995     ROMO Rocky Mountain NP 1997
## 86      2                  5912              55496     ROMO Rocky Mountain NP 1997
## 87      3                 10246              82957     ROMO Rocky Mountain NP 1997
## 88      4                  4570              54619     ROMO Rocky Mountain NP 1997
## 89      5                 10020             182301     ROMO Rocky Mountain NP 1997
## 90      6                 16702             477849     ROMO Rocky Mountain NP 1997
## 91      7                 27457             672256     ROMO Rocky Mountain NP 1997
## 92      8                 32563             635015     ROMO Rocky Mountain NP 1997
## 93      9                 21495             408657     ROMO Rocky Mountain NP 1997
## 94     10                 10298             211588     ROMO Rocky Mountain NP 1997
## 95     11                  9683              65166     ROMO Rocky Mountain NP 1997
## 96     12                 10182              58455     ROMO Rocky Mountain NP 1997
## 97      1                  6650              64192     ROMO Rocky Mountain NP 1998
## 98      2                  7984              61194     ROMO Rocky Mountain NP 1998
## 99      3                  7169              70334     ROMO Rocky Mountain NP 1998
## 100     4                  5609              67735     ROMO Rocky Mountain NP 1998
## 101     5                 13935             198448     ROMO Rocky Mountain NP 1998
## 102     6                 18808             453744     ROMO Rocky Mountain NP 1998
## 103     7                 26503             683467     ROMO Rocky Mountain NP 1998
## 104     8                 35442             636460     ROMO Rocky Mountain NP 1998
## 105     9                 20275             445728     ROMO Rocky Mountain NP 1998
## 106    10                 13162             227638     ROMO Rocky Mountain NP 1998
## 107    11                  7517              69927     ROMO Rocky Mountain NP 1998
## 108    12                 11601              56555     ROMO Rocky Mountain NP 1998
## 109     1                 12044              60871     ROMO Rocky Mountain NP 1999
## 110     2                 11994              74798     ROMO Rocky Mountain NP 1999
## 111     3                  9522              87163     ROMO Rocky Mountain NP 1999
## 112     4                  2785              58644     ROMO Rocky Mountain NP 1999
## 113     5                 12580             187697     ROMO Rocky Mountain NP 1999
## 114     6                 13349             471035     ROMO Rocky Mountain NP 1999
## 115     7                 37925             739167     ROMO Rocky Mountain NP 1999
## 116     8                 22479             644694     ROMO Rocky Mountain NP 1999
## 117     9                 24894             466394     ROMO Rocky Mountain NP 1999
## 118    10                 10350             228197     ROMO Rocky Mountain NP 1999
## 119    11                  8600              94367     ROMO Rocky Mountain NP 1999
## 120    12                 13408              73296     ROMO Rocky Mountain NP 1999
## 121     1                 11398              67728     ROMO Rocky Mountain NP 2000
## 122     2                 11173              74328     ROMO Rocky Mountain NP 2000
## 123     3                  9588              83498     ROMO Rocky Mountain NP 2000
## 124     4                 14335              82564     ROMO Rocky Mountain NP 2000
## 125     5                 12178             211790     ROMO Rocky Mountain NP 2000
## 126     6                 24131             483925     ROMO Rocky Mountain NP 2000
## 127     7                 39183             735598     ROMO Rocky Mountain NP 2000
## 128     8                 27521             597407     ROMO Rocky Mountain NP 2000
## 129     9                 11987             448191     ROMO Rocky Mountain NP 2000
## 130    10                 11828             242240     ROMO Rocky Mountain NP 2000
## 131    11                 10640              85145     ROMO Rocky Mountain NP 2000
## 132    12                 10690              72978     ROMO Rocky Mountain NP 2000
## 133     1                 15599              62319     ROMO Rocky Mountain NP 2001
## 134     2                 13825              66820     ROMO Rocky Mountain NP 2001
## 135     3                  8816              73736     ROMO Rocky Mountain NP 2001
## 136     4                  7009              82007     ROMO Rocky Mountain NP 2001
## 137     5                  3640             198797     ROMO Rocky Mountain NP 2001
## 138     6                 21894             499970     ROMO Rocky Mountain NP 2001
## 139     7                 40281             749500     ROMO Rocky Mountain NP 2001
## 140     8                 27928             616789     ROMO Rocky Mountain NP 2001
## 141     9                 12586             463160     ROMO Rocky Mountain NP 2001
## 142    10                  6114             184616     ROMO Rocky Mountain NP 2001
## 143    11                  9013              81020     ROMO Rocky Mountain NP 2001
## 144    12                 11919              60951     ROMO Rocky Mountain NP 2001
## 145     1                 14591              64696     ROMO Rocky Mountain NP 2002
## 146     2                  9903              62365     ROMO Rocky Mountain NP 2002
## 147     3                 11023              78997     ROMO Rocky Mountain NP 2002
## 148     4                  6596              72485     ROMO Rocky Mountain NP 2002
## 149     5                 14216             228491     ROMO Rocky Mountain NP 2002
## 150     6                 16700             491045     ROMO Rocky Mountain NP 2002
## 151     7                 17503             653677     ROMO Rocky Mountain NP 2002
## 152     8                 18637             598693     ROMO Rocky Mountain NP 2002
## 153     9                 13349             428493     ROMO Rocky Mountain NP 2002
## 154    10                 10403             183445     ROMO Rocky Mountain NP 2002
## 155    11                  9214              57455     ROMO Rocky Mountain NP 2002
## 156    12                  7457              68633     ROMO Rocky Mountain NP 2002
## 157     1                 31849              61472     ROMO Rocky Mountain NP 2003
## 158     2                  6653              48224     ROMO Rocky Mountain NP 2003
## 159     3                  7614              63999     ROMO Rocky Mountain NP 2003
## 160     4                  3246              69226     ROMO Rocky Mountain NP 2003
## 161     5                 18581             198771     ROMO Rocky Mountain NP 2003
## 162     6                 17137             457861     ROMO Rocky Mountain NP 2003
## 163     7                 17374             678086     ROMO Rocky Mountain NP 2003
## 164     8                 24696             626473     ROMO Rocky Mountain NP 2003
## 165     9                 17626             465941     ROMO Rocky Mountain NP 2003
## 166    10                 15161             262699     ROMO Rocky Mountain NP 2003
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 218 rows ]</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="apis-and-iteration-week-3.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Everglades</span></span>
<span id="cb18-2"><a href="apis-and-iteration-week-3.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;EVER&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1990&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode      UnitName Year
## 1       1                  5223             122121     EVER Everglades NP 1990
## 2       2                  4518             131994     EVER Everglades NP 1990
## 3       3                  5120             132341     EVER Everglades NP 1990
## 4       4                  4225             111298     EVER Everglades NP 1990
## 5       5                  3314              46134     EVER Everglades NP 1990
## 6       6                  3100              46676     EVER Everglades NP 1990
## 7       7                  3177              49461     EVER Everglades NP 1990
## 8       8                  3153              54334     EVER Everglades NP 1990
## 9       9                  2572              44768     EVER Everglades NP 1990
## 10     10                  2607              48656     EVER Everglades NP 1990
## 11     11                  3170              75518     EVER Everglades NP 1990
## 12     12                  4005              94624     EVER Everglades NP 1990
## 13      1                  6350             138817     EVER Everglades NP 1991
## 14      2                  5255             149194     EVER Everglades NP 1991
## 15      3                  5762             150641     EVER Everglades NP 1991
## 16      4                  5067             110235     EVER Everglades NP 1991
## 17      5                  3762              94660     EVER Everglades NP 1991
## 18      6                  4143              68937     EVER Everglades NP 1991
## 19      7                  4121              61878     EVER Everglades NP 1991
## 20      8                  3860              71602     EVER Everglades NP 1991
## 21      9                  3599              81298     EVER Everglades NP 1991
## 22     10                  4058              86312     EVER Everglades NP 1991
## 23     11                  4586             126458     EVER Everglades NP 1991
## 24     12                  5066             151982     EVER Everglades NP 1991
## 25      1                  6623             142197     EVER Everglades NP 1992
## 26      2                  5745             163917     EVER Everglades NP 1992
## 27      3                  6518             158688     EVER Everglades NP 1992
## 28      4                  5067             126842     EVER Everglades NP 1992
## 29      5                  4095             100595     EVER Everglades NP 1992
## 30      6                  3896              59923     EVER Everglades NP 1992
## 31      7                  4011              70128     EVER Everglades NP 1992
## 32      8                  2615              59786     EVER Everglades NP 1992
## 33      9                     0               7610     EVER Everglades NP 1992
## 34     10                     0              23820     EVER Everglades NP 1992
## 35     11                     0              30644     EVER Everglades NP 1992
## 36     12                   101              81536     EVER Everglades NP 1992
## 37      1                  7386             106855     EVER Everglades NP 1993
## 38      2                  7199             119887     EVER Everglades NP 1993
## 39      3                  8078             121353     EVER Everglades NP 1993
## 40      4                  7478              96384     EVER Everglades NP 1993
## 41      5                  7178              76531     EVER Everglades NP 1993
## 42      6                  6816              62341     EVER Everglades NP 1993
## 43      7                  6752              66214     EVER Everglades NP 1993
## 44      8                  6317              61743     EVER Everglades NP 1993
## 45      9                  6773              51114     EVER Everglades NP 1993
## 46     10                  7322              58058     EVER Everglades NP 1993
## 47     11                  7899              67870     EVER Everglades NP 1993
## 48     12                  8739              85356     EVER Everglades NP 1993
## 49      1                  8879             103824     EVER Everglades NP 1994
## 50      2                  8846             114850     EVER Everglades NP 1994
## 51      3                 10365             121521     EVER Everglades NP 1994
## 52      4                  8670              95785     EVER Everglades NP 1994
## 53      5                  7622              65038     EVER Everglades NP 1994
## 54      6                  7403              44801     EVER Everglades NP 1994
## 55      7                  6521              51623     EVER Everglades NP 1994
## 56      8                  7712              47314     EVER Everglades NP 1994
## 57      9                  7107              47692     EVER Everglades NP 1994
## 58     10                  7203              58634     EVER Everglades NP 1994
## 59     11                  7250              64073     EVER Everglades NP 1994
## 60     12                  7911              71300     EVER Everglades NP 1994
## 61      1                  8696              93967     EVER Everglades NP 1995
## 62      2                  7994             110040     EVER Everglades NP 1995
## 63      3                  8585             110731     EVER Everglades NP 1995
## 64      4                  8285              91298     EVER Everglades NP 1995
## 65      5                  7917              67638     EVER Everglades NP 1995
## 66      6                  7716              46409     EVER Everglades NP 1995
## 67      7                  6429              52860     EVER Everglades NP 1995
## 68      8                  6687              50107     EVER Everglades NP 1995
## 69      9                  6666              50551     EVER Everglades NP 1995
## 70     10                  7665              51712     EVER Everglades NP 1995
## 71     11                  7400              57410     EVER Everglades NP 1995
## 72     12                  4857              37743     EVER Everglades NP 1995
## 73      1                  8039              65868     EVER Everglades NP 1996
## 74      2                  8927             124372     EVER Everglades NP 1996
## 75      3                  9716             110571     EVER Everglades NP 1996
## 76      4                  8720              97373     EVER Everglades NP 1996
## 77      5                  8943              71766     EVER Everglades NP 1996
## 78      6                  7661              46886     EVER Everglades NP 1996
## 79      7                  8262              51640     EVER Everglades NP 1996
## 80      8                  7530              55346     EVER Everglades NP 1996
## 81      9                  6584              51386     EVER Everglades NP 1996
## 82     10                  7493              52018     EVER Everglades NP 1996
## 83     11                  7065              73584     EVER Everglades NP 1996
## 84     12                  5718              89357     EVER Everglades NP 1996
## 85      1                  7490             102559     EVER Everglades NP 1997
## 86      2                  6375             128164     EVER Everglades NP 1997
## 87      3                  6690             132529     EVER Everglades NP 1997
## 88      4                  5478              88382     EVER Everglades NP 1997
## 89      5                  4893              72557     EVER Everglades NP 1997
## 90      6                  4670              49464     EVER Everglades NP 1997
## 91      7                  4173              55966     EVER Everglades NP 1997
## 92      8                  3581              59598     EVER Everglades NP 1997
## 93      9                  4067              45536     EVER Everglades NP 1997
## 94     10                  4719              79997     EVER Everglades NP 1997
## 95     11                  5025              85065     EVER Everglades NP 1997
## 96     12                  5259              89715     EVER Everglades NP 1997
## 97      1                  8039             118179     EVER Everglades NP 1998
## 98      2                  5753             128335     EVER Everglades NP 1998
## 99      3                  6168             130692     EVER Everglades NP 1998
## 100     4                  5289             105733     EVER Everglades NP 1998
## 101     5                  5022              94166     EVER Everglades NP 1998
## 102     6                  4523              66404     EVER Everglades NP 1998
## 103     7                  4298              76686     EVER Everglades NP 1998
## 104     8                  4202              82053     EVER Everglades NP 1998
## 105     9                  2922              56280     EVER Everglades NP 1998
## 106    10                  3785              72328     EVER Everglades NP 1998
## 107    11                  4449              92830     EVER Everglades NP 1998
## 108    12                  4812              94529     EVER Everglades NP 1998
## 109     1                  5801             118341     EVER Everglades NP 1999
## 110     2                  5750             139935     EVER Everglades NP 1999
## 111     3                  6240             145592     EVER Everglades NP 1999
## 112     4                  5627             118254     EVER Everglades NP 1999
## 113     5                  5582              82388     EVER Everglades NP 1999
## 114     6                  6807              64672     EVER Everglades NP 1999
## 115     7                  5999              68994     EVER Everglades NP 1999
## 116     8                  5664              68676     EVER Everglades NP 1999
## 117     9                  4674              58989     EVER Everglades NP 1999
## 118    10                  4736              57213     EVER Everglades NP 1999
## 119    11                  5163              73757     EVER Everglades NP 1999
## 120    12                  5418              77171     EVER Everglades NP 1999
## 121     1                  6138             109488     EVER Everglades NP 2000
## 122     2                  6368             131302     EVER Everglades NP 2000
## 123     3                  6225             127298     EVER Everglades NP 2000
## 124     4                  5523             100648     EVER Everglades NP 2000
## 125     5                  5789              81748     EVER Everglades NP 2000
## 126     6                  5040              44130     EVER Everglades NP 2000
## 127     7                  5085              41367     EVER Everglades NP 2000
## 128     8                  5459              56499     EVER Everglades NP 2000
## 129     9                  5256              58225     EVER Everglades NP 2000
## 130    10                  5523              73489     EVER Everglades NP 2000
## 131    11                  4290              83271     EVER Everglades NP 2000
## 132    12                  4542              87925     EVER Everglades NP 2000
## 133     1                  6188             130610     EVER Everglades NP 2001
## 134     2                  5058             159927     EVER Everglades NP 2001
## 135     3                  5828             142544     EVER Everglades NP 2001
## 136     4                  4935             105186     EVER Everglades NP 2001
## 137     5                  6057              78059     EVER Everglades NP 2001
## 138     6                  5270              63953     EVER Everglades NP 2001
## 139     7                  4062              61905     EVER Everglades NP 2001
## 140     8                  4310              52413     EVER Everglades NP 2001
## 141     9                  3782              40968     EVER Everglades NP 2001
## 142    10                  4206              54878     EVER Everglades NP 2001
## 143    11                  4494              70801     EVER Everglades NP 2001
## 144    12                  4349              88607     EVER Everglades NP 2001
## 145     1                  6188             116699     EVER Everglades NP 2002
## 146     2                  5361             123767     EVER Everglades NP 2002
## 147     3                 14637             138066     EVER Everglades NP 2002
## 148     4                  5640              90924     EVER Everglades NP 2002
## 149     5                  4635              59925     EVER Everglades NP 2002
## 150     6                  4497              46614     EVER Everglades NP 2002
## 151     7                  4122              52050     EVER Everglades NP 2002
## 152     8                  4433              51891     EVER Everglades NP 2002
## 153     9                  4131              46264     EVER Everglades NP 2002
## 154    10                  4626              82933     EVER Everglades NP 2002
## 155    11                  4883              76566     EVER Everglades NP 2002
## 156    12                  5820              83210     EVER Everglades NP 2002
## 157     1                  6998             116320     EVER Everglades NP 2003
## 158     2                  6260             131014     EVER Everglades NP 2003
## 159     3                  6905             135722     EVER Everglades NP 2003
## 160     4                  6171              94008     EVER Everglades NP 2003
## 161     5                  5058              68448     EVER Everglades NP 2003
## 162     6                  3578              58174     EVER Everglades NP 2003
## 163     7                  3362              64537     EVER Everglades NP 2003
## 164     8                  3188              65496     EVER Everglades NP 2003
## 165     9                  3096              55460     EVER Everglades NP 2003
## 166    10                  4289              70974     EVER Everglades NP 2003
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 218 rows ]</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="apis-and-iteration-week-3.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Theodore Roosevelt</span></span>
<span id="cb20-2"><a href="apis-and-iteration-week-3.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;THRO&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1990&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode              UnitName Year
## 1       1                   434               1044     THRO Theodore Roosevelt NP 1990
## 2       2                   434               1339     THRO Theodore Roosevelt NP 1990
## 3       3                   434               3636     THRO Theodore Roosevelt NP 1990
## 4       4                   623              16226     THRO Theodore Roosevelt NP 1990
## 5       5                   623              39255     THRO Theodore Roosevelt NP 1990
## 6       6                   623              88320     THRO Theodore Roosevelt NP 1990
## 7       7                   623             131586     THRO Theodore Roosevelt NP 1990
## 8       8                   623             118057     THRO Theodore Roosevelt NP 1990
## 9       9                   623              46139     THRO Theodore Roosevelt NP 1990
## 10     10                   623               9207     THRO Theodore Roosevelt NP 1990
## 11     11                   434               4326     THRO Theodore Roosevelt NP 1990
## 12     12                   434               1583     THRO Theodore Roosevelt NP 1990
## 13      1                   434               1387     THRO Theodore Roosevelt NP 1991
## 14      2                   434               1462     THRO Theodore Roosevelt NP 1991
## 15      3                   434               4332     THRO Theodore Roosevelt NP 1991
## 16      4                   623              13501     THRO Theodore Roosevelt NP 1991
## 17      5                   623              34713     THRO Theodore Roosevelt NP 1991
## 18      6                   623              83363     THRO Theodore Roosevelt NP 1991
## 19      7                   623             127724     THRO Theodore Roosevelt NP 1991
## 20      8                   623             129336     THRO Theodore Roosevelt NP 1991
## 21      9                   623              45886     THRO Theodore Roosevelt NP 1991
## 22     10                   623              20626     THRO Theodore Roosevelt NP 1991
## 23     11                   434               5220     THRO Theodore Roosevelt NP 1991
## 24     12                   434               1376     THRO Theodore Roosevelt NP 1991
## 25      1                   417                909     THRO Theodore Roosevelt NP 1992
## 26      2                   417               1026     THRO Theodore Roosevelt NP 1992
## 27      3                   472               3663     THRO Theodore Roosevelt NP 1992
## 28      4                   622              15052     THRO Theodore Roosevelt NP 1992
## 29      5                   623              35418     THRO Theodore Roosevelt NP 1992
## 30      6                   623              82069     THRO Theodore Roosevelt NP 1992
## 31      7                   622             134524     THRO Theodore Roosevelt NP 1992
## 32      8                   621             130518     THRO Theodore Roosevelt NP 1992
## 33      9                   624              47515     THRO Theodore Roosevelt NP 1992
## 34     10                   482              20176     THRO Theodore Roosevelt NP 1992
## 35     11                   472               4435     THRO Theodore Roosevelt NP 1992
## 36     12                   417                632     THRO Theodore Roosevelt NP 1992
## 37      1                   417                748     THRO Theodore Roosevelt NP 1993
## 38      2                   417                814     THRO Theodore Roosevelt NP 1993
## 39      3                   472               2212     THRO Theodore Roosevelt NP 1993
## 40      4                   622              14042     THRO Theodore Roosevelt NP 1993
## 41      5                   623              37693     THRO Theodore Roosevelt NP 1993
## 42      6                   623              80340     THRO Theodore Roosevelt NP 1993
## 43      7                   622             125177     THRO Theodore Roosevelt NP 1993
## 44      8                   621             136519     THRO Theodore Roosevelt NP 1993
## 45      9                   624              49363     THRO Theodore Roosevelt NP 1993
## 46     10                   482              22456     THRO Theodore Roosevelt NP 1993
## 47     11                   472               4789     THRO Theodore Roosevelt NP 1993
## 48     12                   417               1007     THRO Theodore Roosevelt NP 1993
## 49      1                   417                894     THRO Theodore Roosevelt NP 1994
## 50      2                   417                933     THRO Theodore Roosevelt NP 1994
## 51      3                   472               2884     THRO Theodore Roosevelt NP 1994
## 52      4                   622              16714     THRO Theodore Roosevelt NP 1994
## 53      5                   623              41432     THRO Theodore Roosevelt NP 1994
## 54      6                   623              85653     THRO Theodore Roosevelt NP 1994
## 55      7                   622             141375     THRO Theodore Roosevelt NP 1994
## 56      8                   621             130386     THRO Theodore Roosevelt NP 1994
## 57      9                   624              56071     THRO Theodore Roosevelt NP 1994
## 58     10                   482              22176     THRO Theodore Roosevelt NP 1994
## 59     11                   472               5667     THRO Theodore Roosevelt NP 1994
## 60     12                   417               1164     THRO Theodore Roosevelt NP 1994
## 61      1                   417               1058     THRO Theodore Roosevelt NP 1995
## 62      2                   417               1688     THRO Theodore Roosevelt NP 1995
## 63      3                   472               2020     THRO Theodore Roosevelt NP 1995
## 64      4                   622              12437     THRO Theodore Roosevelt NP 1995
## 65      5                   623              37140     THRO Theodore Roosevelt NP 1995
## 66      6                   623              62012     THRO Theodore Roosevelt NP 1995
## 67      7                   622             126108     THRO Theodore Roosevelt NP 1995
## 68      8                   621             125332     THRO Theodore Roosevelt NP 1995
## 69      9                   624              59467     THRO Theodore Roosevelt NP 1995
## 70     10                   482              25065     THRO Theodore Roosevelt NP 1995
## 71     11                   472               7819     THRO Theodore Roosevelt NP 1995
## 72     12                   417                553     THRO Theodore Roosevelt NP 1995
## 73      1                   417                712     THRO Theodore Roosevelt NP 1996
## 74      2                   417               1752     THRO Theodore Roosevelt NP 1996
## 75      3                   472               2822     THRO Theodore Roosevelt NP 1996
## 76      4                   622              16940     THRO Theodore Roosevelt NP 1996
## 77      5                   623              43424     THRO Theodore Roosevelt NP 1996
## 78      6                   623              58352     THRO Theodore Roosevelt NP 1996
## 79      7                   622              99750     THRO Theodore Roosevelt NP 1996
## 80      8                   621             122566     THRO Theodore Roosevelt NP 1996
## 81      9                   624              53108     THRO Theodore Roosevelt NP 1996
## 82     10                   482              27333     THRO Theodore Roosevelt NP 1996
## 83     11                   472               8528     THRO Theodore Roosevelt NP 1996
## 84     12                   417                794     THRO Theodore Roosevelt NP 1996
## 85      1                   417                814     THRO Theodore Roosevelt NP 1997
## 86      2                   417               1676     THRO Theodore Roosevelt NP 1997
## 87      3                   472               2519     THRO Theodore Roosevelt NP 1997
## 88      4                   622              10127     THRO Theodore Roosevelt NP 1997
## 89      5                   623              29261     THRO Theodore Roosevelt NP 1997
## 90      6                   623              61553     THRO Theodore Roosevelt NP 1997
## 91      7                   622              93687     THRO Theodore Roosevelt NP 1997
## 92      8                   621             108501     THRO Theodore Roosevelt NP 1997
## 93      9                   624              52435     THRO Theodore Roosevelt NP 1997
## 94     10                   482              24610     THRO Theodore Roosevelt NP 1997
## 95     11                   472               5512     THRO Theodore Roosevelt NP 1997
## 96     12                   417               2570     THRO Theodore Roosevelt NP 1997
## 97      1                   417               3211     THRO Theodore Roosevelt NP 1998
## 98      2                   417               3222     THRO Theodore Roosevelt NP 1998
## 99      3                   472               2225     THRO Theodore Roosevelt NP 1998
## 100     4                   622              17438     THRO Theodore Roosevelt NP 1998
## 101     5                   623              40643     THRO Theodore Roosevelt NP 1998
## 102     6                   623              76842     THRO Theodore Roosevelt NP 1998
## 103     7                   622             106388     THRO Theodore Roosevelt NP 1998
## 104     8                   621             111675     THRO Theodore Roosevelt NP 1998
## 105     9                   624              54891     THRO Theodore Roosevelt NP 1998
## 106    10                   482              23752     THRO Theodore Roosevelt NP 1998
## 107    11                   472               6885     THRO Theodore Roosevelt NP 1998
## 108    12                   417               1114     THRO Theodore Roosevelt NP 1998
## 109     1                   472               1167     THRO Theodore Roosevelt NP 1999
## 110     2                   472               1464     THRO Theodore Roosevelt NP 1999
## 111     3                   472               2921     THRO Theodore Roosevelt NP 1999
## 112     4                   622              20194     THRO Theodore Roosevelt NP 1999
## 113     5                   623              30590     THRO Theodore Roosevelt NP 1999
## 114     6                   623              71375     THRO Theodore Roosevelt NP 1999
## 115     7                   622             102566     THRO Theodore Roosevelt NP 1999
## 116     8                   621             110667     THRO Theodore Roosevelt NP 1999
## 117     9                   624              51527     THRO Theodore Roosevelt NP 1999
## 118    10                   483              27695     THRO Theodore Roosevelt NP 1999
## 119    11                   472               9617     THRO Theodore Roosevelt NP 1999
## 120    12                   472               1528     THRO Theodore Roosevelt NP 1999
## 121     1                   472               1039     THRO Theodore Roosevelt NP 2000
## 122     2                   472               1037     THRO Theodore Roosevelt NP 2000
## 123     3                   472               4073     THRO Theodore Roosevelt NP 2000
## 124     4                   622              16264     THRO Theodore Roosevelt NP 2000
## 125     5                   623              41394     THRO Theodore Roosevelt NP 2000
## 126     6                   623              64396     THRO Theodore Roosevelt NP 2000
## 127     7                   622             116569     THRO Theodore Roosevelt NP 2000
## 128     8                   621             101706     THRO Theodore Roosevelt NP 2000
## 129     9                   624              55362     THRO Theodore Roosevelt NP 2000
## 130    10                   483              22097     THRO Theodore Roosevelt NP 2000
## 131    11                   472               7138     THRO Theodore Roosevelt NP 2000
## 132    12                   472                738     THRO Theodore Roosevelt NP 2000
## 133     1                   472                625     THRO Theodore Roosevelt NP 2001
## 134     2                   472                583     THRO Theodore Roosevelt NP 2001
## 135     3                   472               1706     THRO Theodore Roosevelt NP 2001
## 136     4                   622              15367     THRO Theodore Roosevelt NP 2001
## 137     5                   623              34347     THRO Theodore Roosevelt NP 2001
## 138     6                   623              70200     THRO Theodore Roosevelt NP 2001
## 139     7                   622             117441     THRO Theodore Roosevelt NP 2001
## 140     8                   621             114881     THRO Theodore Roosevelt NP 2001
## 141     9                   624              56866     THRO Theodore Roosevelt NP 2001
## 142    10                   483              26244     THRO Theodore Roosevelt NP 2001
## 143    11                   472               7556     THRO Theodore Roosevelt NP 2001
## 144    12                   472                793     THRO Theodore Roosevelt NP 2001
## 145     1                   472                672     THRO Theodore Roosevelt NP 2002
## 146     2                   472                646     THRO Theodore Roosevelt NP 2002
## 147     3                   472               1745     THRO Theodore Roosevelt NP 2002
## 148     4                   622              15680     THRO Theodore Roosevelt NP 2002
## 149     5                   623              35473     THRO Theodore Roosevelt NP 2002
## 150     6                   623              76734     THRO Theodore Roosevelt NP 2002
## 151     7                   622             120464     THRO Theodore Roosevelt NP 2002
## 152     8                   621             119915     THRO Theodore Roosevelt NP 2002
## 153     9                   624              65289     THRO Theodore Roosevelt NP 2002
## 154    10                   483              25478     THRO Theodore Roosevelt NP 2002
## 155    11                   472               8484     THRO Theodore Roosevelt NP 2002
## 156    12                   472                971     THRO Theodore Roosevelt NP 2002
## 157     1                   472               1334     THRO Theodore Roosevelt NP 2003
## 158     2                   472               1682     THRO Theodore Roosevelt NP 2003
## 159     3                   472               2425     THRO Theodore Roosevelt NP 2003
## 160     4                   622              18106     THRO Theodore Roosevelt NP 2003
## 161     5                   623              37445     THRO Theodore Roosevelt NP 2003
## 162     6                   623              78469     THRO Theodore Roosevelt NP 2003
## 163     7                   622             114219     THRO Theodore Roosevelt NP 2003
## 164     8                   621             116140     THRO Theodore Roosevelt NP 2003
## 165     9                   624              72031     THRO Theodore Roosevelt NP 2003
## 166    10                   483              36908     THRO Theodore Roosevelt NP 2003
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 218 rows ]</code></pre>
</div>
</div>
</div>
<div id="function-defaults" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Function Defaults<a href="apis-and-iteration-week-3.html#function-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Look at the code that you just wrote; writing out all of those unchanging date arguments still feels repetitive, right? When developing functions, there is an option for setting default values for arguments so that you don’t necessarily have to write all of them out every time you run it in the future. But, the option still exists within the function to make changes when necessary. For example, let’s tweak our <code>parkwide_visitaion()</code> function to have the default year be 2021:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="apis-and-iteration-week-3.html#cb22-1" aria-hidden="true" tabindex="-1"></a>parkwide_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">year =</span> <span class="st">&quot;2021&quot;</span>) {</span>
<span id="cb22-2"><a href="apis-and-iteration-week-3.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="apis-and-iteration-week-3.html#cb22-3" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/&quot;</span>, year))</span>
<span id="cb22-4"><a href="apis-and-iteration-week-3.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="apis-and-iteration-week-3.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb22-6"><a href="apis-and-iteration-week-3.html#cb22-6" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb22-7"><a href="apis-and-iteration-week-3.html#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="apis-and-iteration-week-3.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb22-9"><a href="apis-and-iteration-week-3.html#cb22-9" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_data)</span>
<span id="cb22-10"><a href="apis-and-iteration-week-3.html#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="apis-and-iteration-week-3.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(final_data)</span>
<span id="cb22-12"><a href="apis-and-iteration-week-3.html#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="apis-and-iteration-week-3.html#cb22-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-14"><a href="apis-and-iteration-week-3.html#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="apis-and-iteration-week-3.html#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">parkwide_visitation</span>()</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1              11632614           11978413       NA       NA 2021
## 2      2              11082899           11692967       NA       NA 2021
## 3      3              12981524           18370611       NA       NA 2021
## 4      4              12857567           22155245       NA       NA 2021
## 5      5              13250575           27963739       NA       NA 2021
## 6      6              13789961           36122392       NA       NA 2021
## 7      7              14734920           41329530       NA       NA 2021
## 8      8              14280304           35380986       NA       NA 2021
## 9      9              13382939           30204635       NA       NA 2021
## 10    10              13882165           26961779       NA       NA 2021
## 11    11              13192146           18903397       NA       NA 2021
## 12    12              13007065           16051712       NA       NA 2021</code></pre>
<p>Because the default year is 2021, you don’t have to write it out explicitly in the function (so long as that’s the year you’re interested in). But, you still have the option of changing the year to something else:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="apis-and-iteration-week-3.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="st">&quot;1992&quot;</span>)</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1               6209285           10940618       NA       NA 1992
## 2      2               6010027           11931340       NA       NA 1992
## 3      3               6756902           15369139       NA       NA 1992
## 4      4               7255782           21458739       NA       NA 1992
## 5      5               7690763           26648530       NA       NA 1992
## 6      6               7593227           33284625       NA       NA 1992
## 7      7               8438755           41099305       NA       NA 1992
## 8      8               8056823           38625804       NA       NA 1992
## 9      9               7329755           26438266       NA       NA 1992
## 10    10               7105574           23616057       NA       NA 1992
## 11    11               6507805           14338165       NA       NA 1992
## 12    12               6702698           10943961       NA       NA 1992</code></pre>
<div id="exercise-5" class="section level4 hasAnchor" number="1.3.0.1" style="color: maroon">
<h4><span class="header-section-number">1.3.0.1</span> Exercise #5<a href="apis-and-iteration-week-3.html#exercise-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Default our <code>unit_visitation()</code> function’s arguments related to the starting and ending months to January and December, respectively. This way, we are automatically pulling in data for entire years. Rerun the function for ROMO, EVER, and THRO for the 1980-2021 time period to make sure it works properly.</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="apis-and-iteration-week-3.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#specified months in the unit_visitation function above</span></span>
<span id="cb26-2"><a href="apis-and-iteration-week-3.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="apis-and-iteration-week-3.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Rocky Mtn</span></span>
<span id="cb26-4"><a href="apis-and-iteration-week-3.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;ROMO&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1980&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode          UnitName Year
## 1       1                    28              42902     ROMO Rocky Mountain NP 1980
## 2       2                    44              59403     ROMO Rocky Mountain NP 1980
## 3       3                    24              58790     ROMO Rocky Mountain NP 1980
## 4       4                   142              64299     ROMO Rocky Mountain NP 1980
## 5       5                    98              93210     ROMO Rocky Mountain NP 1980
## 6       6                  2384             410449     ROMO Rocky Mountain NP 1980
## 7       7                  3748             573465     ROMO Rocky Mountain NP 1980
## 8       8                  3634             609383     ROMO Rocky Mountain NP 1980
## 9       9                  1472             389771     ROMO Rocky Mountain NP 1980
## 10     10                   532             219495     ROMO Rocky Mountain NP 1980
## 11     11                   100              51344     ROMO Rocky Mountain NP 1980
## 12     12                    54              69426     ROMO Rocky Mountain NP 1980
## 13      1                    60              52645     ROMO Rocky Mountain NP 1981
## 14      2                     0              47256     ROMO Rocky Mountain NP 1981
## 15      3                     0              63637     ROMO Rocky Mountain NP 1981
## 16      4                     0              78529     ROMO Rocky Mountain NP 1981
## 17      5                     0             130744     ROMO Rocky Mountain NP 1981
## 18      6                   642             439671     ROMO Rocky Mountain NP 1981
## 19      7                  2130             674786     ROMO Rocky Mountain NP 1981
## 20      8                  1908             677202     ROMO Rocky Mountain NP 1981
## 21      9                   656             430738     ROMO Rocky Mountain NP 1981
## 22     10                   170             202193     ROMO Rocky Mountain NP 1981
## 23     11                    54              51650     ROMO Rocky Mountain NP 1981
## 24     12                   218              62191     ROMO Rocky Mountain NP 1981
## 25      1                   316              65547     ROMO Rocky Mountain NP 1982
## 26      2                    48              59558     ROMO Rocky Mountain NP 1982
## 27      3                    54              64554     ROMO Rocky Mountain NP 1982
## 28      4                   174              74092     ROMO Rocky Mountain NP 1982
## 29      5                   298             106375     ROMO Rocky Mountain NP 1982
## 30      6                  2796             366311     ROMO Rocky Mountain NP 1982
## 31      7                  3274             573923     ROMO Rocky Mountain NP 1982
## 32      8                  4406             613132     ROMO Rocky Mountain NP 1982
## 33      9                  2428             360870     ROMO Rocky Mountain NP 1982
## 34     10                   736             177760     ROMO Rocky Mountain NP 1982
## 35     11                    58              51377     ROMO Rocky Mountain NP 1982
## 36     12                   198              50617     ROMO Rocky Mountain NP 1982
## 37      1                  3778              67598     ROMO Rocky Mountain NP 1983
## 38      2                  2644              70480     ROMO Rocky Mountain NP 1983
## 39      3                  2560              60310     ROMO Rocky Mountain NP 1983
## 40      4                  4563              79542     ROMO Rocky Mountain NP 1983
## 41      5                  4257              91340     ROMO Rocky Mountain NP 1983
## 42      6                  9011             322393     ROMO Rocky Mountain NP 1983
## 43      7                 15891             552473     ROMO Rocky Mountain NP 1983
## 44      8                 23219             625132     ROMO Rocky Mountain NP 1983
## 45      9                 14202             432745     ROMO Rocky Mountain NP 1983
## 46     10                 10841             193914     ROMO Rocky Mountain NP 1983
## 47     11                  6370              76969     ROMO Rocky Mountain NP 1983
## 48     12                  4744              26110     ROMO Rocky Mountain NP 1983
## 49      1                  5253              51124     ROMO Rocky Mountain NP 1984
## 50      2                  4257              49126     ROMO Rocky Mountain NP 1984
## 51      3                  3165              46210     ROMO Rocky Mountain NP 1984
## 52      4                  3174              46736     ROMO Rocky Mountain NP 1984
## 53      5                  4212              75806     ROMO Rocky Mountain NP 1984
## 54      6                 14464             303393     ROMO Rocky Mountain NP 1984
## 55      7                 27018             514848     ROMO Rocky Mountain NP 1984
## 56      8                 30006             605465     ROMO Rocky Mountain NP 1984
## 57      9                 63411             355768     ROMO Rocky Mountain NP 1984
## 58     10                 75817              93927     ROMO Rocky Mountain NP 1984
## 59     11                  2951              52850     ROMO Rocky Mountain NP 1984
## 60     12                   458              36195     ROMO Rocky Mountain NP 1984
## 61      1                  5832              68416     ROMO Rocky Mountain NP 1985
## 62      2                  3676              47012     ROMO Rocky Mountain NP 1985
## 63      3                   865              55707     ROMO Rocky Mountain NP 1985
## 64      4                  1513              58854     ROMO Rocky Mountain NP 1985
## 65      5                  1949             117475     ROMO Rocky Mountain NP 1985
## 66      6                 12852             327505     ROMO Rocky Mountain NP 1985
## 67      7                 27504             501624     ROMO Rocky Mountain NP 1985
## 68      8                 26757             585115     ROMO Rocky Mountain NP 1985
## 69      9                 12828             304574     ROMO Rocky Mountain NP 1985
## 70     10                  4048              87250     ROMO Rocky Mountain NP 1985
## 71     11                  3285              52986     ROMO Rocky Mountain NP 1985
## 72     12                  4515              42336     ROMO Rocky Mountain NP 1985
## 73      1                  7281              74949     ROMO Rocky Mountain NP 1986
## 74      2                  4342              38588     ROMO Rocky Mountain NP 1986
## 75      3                  4653              58001     ROMO Rocky Mountain NP 1986
## 76      4                  2424              67259     ROMO Rocky Mountain NP 1986
## 77      5                  3197             111710     ROMO Rocky Mountain NP 1986
## 78      6                  9976             303208     ROMO Rocky Mountain NP 1986
## 79      7                 24774             547751     ROMO Rocky Mountain NP 1986
## 80      8                 27016             643670     ROMO Rocky Mountain NP 1986
## 81      9                 13184             338915     ROMO Rocky Mountain NP 1986
## 82     10                  6925             126243     ROMO Rocky Mountain NP 1986
## 83     11                  5671              45674     ROMO Rocky Mountain NP 1986
## 84     12                  5445              52266     ROMO Rocky Mountain NP 1986
## 85      1                  2917              77184     ROMO Rocky Mountain NP 1987
## 86      2                 12844              52922     ROMO Rocky Mountain NP 1987
## 87      3                  2684              54316     ROMO Rocky Mountain NP 1987
## 88      4                  3380              59363     ROMO Rocky Mountain NP 1987
## 89      5                  6704             136049     ROMO Rocky Mountain NP 1987
## 90      6                 16155             365757     ROMO Rocky Mountain NP 1987
## 91      7                 25768             546231     ROMO Rocky Mountain NP 1987
## 92      8                 26661             621584     ROMO Rocky Mountain NP 1987
## 93      9                 16015             359746     ROMO Rocky Mountain NP 1987
## 94     10                  7265             171484     ROMO Rocky Mountain NP 1987
## 95     11                  6969              50425     ROMO Rocky Mountain NP 1987
## 96     12                  5803              36803     ROMO Rocky Mountain NP 1987
## 97      1                  8191              58824     ROMO Rocky Mountain NP 1988
## 98      2                  8718              52367     ROMO Rocky Mountain NP 1988
## 99      3                  2542              56677     ROMO Rocky Mountain NP 1988
## 100     4                  3584              57933     ROMO Rocky Mountain NP 1988
## 101     5                  2016              91676     ROMO Rocky Mountain NP 1988
## 102     6                 20746             399197     ROMO Rocky Mountain NP 1988
## 103     7                 24083             568028     ROMO Rocky Mountain NP 1988
## 104     8                 30133             617184     ROMO Rocky Mountain NP 1988
## 105     9                 18607             371318     ROMO Rocky Mountain NP 1988
## 106    10                  9106             178657     ROMO Rocky Mountain NP 1988
## 107    11                  7029              55402     ROMO Rocky Mountain NP 1988
## 108    12                  7950              36948     ROMO Rocky Mountain NP 1988
## 109     1                  9784              60075     ROMO Rocky Mountain NP 1989
## 110     2                  9001              52050     ROMO Rocky Mountain NP 1989
## 111     3                  5582              60381     ROMO Rocky Mountain NP 1989
## 112     4                  2510              52044     ROMO Rocky Mountain NP 1989
## 113     5                  7934              92436     ROMO Rocky Mountain NP 1989
## 114     6                 18451             370174     ROMO Rocky Mountain NP 1989
## 115     7                 24557             590130     ROMO Rocky Mountain NP 1989
## 116     8                 21097             600617     ROMO Rocky Mountain NP 1989
## 117     9                 14738             358910     ROMO Rocky Mountain NP 1989
## 118    10                  9143             183199     ROMO Rocky Mountain NP 1989
## 119    11                  5102              54061     ROMO Rocky Mountain NP 1989
## 120    12                  5848              28838     ROMO Rocky Mountain NP 1989
## 121     1                 10956              53565     ROMO Rocky Mountain NP 1990
## 122     2                  9343              49896     ROMO Rocky Mountain NP 1990
## 123     3                  7247              65280     ROMO Rocky Mountain NP 1990
## 124     4                  4681              60274     ROMO Rocky Mountain NP 1990
## 125     5                 11465             108881     ROMO Rocky Mountain NP 1990
## 126     6                 17173             435279     ROMO Rocky Mountain NP 1990
## 127     7                 28031             560806     ROMO Rocky Mountain NP 1990
## 128     8                 30676             646018     ROMO Rocky Mountain NP 1990
## 129     9                 13162             392873     ROMO Rocky Mountain NP 1990
## 130    10                  9608             164130     ROMO Rocky Mountain NP 1990
## 131    11                  5749              73064     ROMO Rocky Mountain NP 1990
## 132    12                  5845              37257     ROMO Rocky Mountain NP 1990
## 133     1                  8071              50910     ROMO Rocky Mountain NP 1991
## 134     2                  6467              57547     ROMO Rocky Mountain NP 1991
## 135     3                  8492              56241     ROMO Rocky Mountain NP 1991
## 136     4                  6231              67986     ROMO Rocky Mountain NP 1991
## 137     5                 13124             118351     ROMO Rocky Mountain NP 1991
## 138     6                 18645             434810     ROMO Rocky Mountain NP 1991
## 139     7                 28663             614118     ROMO Rocky Mountain NP 1991
## 140     8                 25541             642734     ROMO Rocky Mountain NP 1991
## 141     9                 19042             385524     ROMO Rocky Mountain NP 1991
## 142    10                  9185             237608     ROMO Rocky Mountain NP 1991
## 143    11                  2815              43136     ROMO Rocky Mountain NP 1991
## 144    12                  5754              42816     ROMO Rocky Mountain NP 1991
## 145     1                  9398              60038     ROMO Rocky Mountain NP 1992
## 146     2                  9674              48476     ROMO Rocky Mountain NP 1992
## 147     3                  6444              58478     ROMO Rocky Mountain NP 1992
## 148     4                  4797              80217     ROMO Rocky Mountain NP 1992
## 149     5                 11308             160788     ROMO Rocky Mountain NP 1992
## 150     6                 15198             408630     ROMO Rocky Mountain NP 1992
## 151     7                 28690             606764     ROMO Rocky Mountain NP 1992
## 152     8                 24688             623634     ROMO Rocky Mountain NP 1992
## 153     9                 20790             440843     ROMO Rocky Mountain NP 1992
## 154    10                 12764             218570     ROMO Rocky Mountain NP 1992
## 155    11                  4346              47490     ROMO Rocky Mountain NP 1992
## 156    12                  5778              34940     ROMO Rocky Mountain NP 1992
## 157     1                  9015              53780     ROMO Rocky Mountain NP 1993
## 158     2                  8490              39962     ROMO Rocky Mountain NP 1993
## 159     3                  7375              52511     ROMO Rocky Mountain NP 1993
## 160     4                  5256              65790     ROMO Rocky Mountain NP 1993
## 161     5                  7498             120708     ROMO Rocky Mountain NP 1993
## 162     6                 20483             424670     ROMO Rocky Mountain NP 1993
## 163     7                 31510             623451     ROMO Rocky Mountain NP 1993
## 164     8                 36845             654327     ROMO Rocky Mountain NP 1993
## 165     9                 22219             423570     ROMO Rocky Mountain NP 1993
## 166    10                 11741             230972     ROMO Rocky Mountain NP 1993
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 338 rows ]</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="apis-and-iteration-week-3.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Everglades</span></span>
<span id="cb28-2"><a href="apis-and-iteration-week-3.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;EVER&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1980&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode      UnitName Year
## 1       1                  5670              92517     EVER Everglades NP 1980
## 2       2                  4697              96585     EVER Everglades NP 1980
## 3       3                  6160             101797     EVER Everglades NP 1980
## 4       4                  5281              80500     EVER Everglades NP 1980
## 5       5                  4851              53627     EVER Everglades NP 1980
## 6       6                  4151              37721     EVER Everglades NP 1980
## 7       7                  5037              45665     EVER Everglades NP 1980
## 8       8                  4431              47624     EVER Everglades NP 1980
## 9       9                  4274              34889     EVER Everglades NP 1980
## 10     10                  4368              47387     EVER Everglades NP 1980
## 11     11                  4060              37498     EVER Everglades NP 1980
## 12     12                  5127              68434     EVER Everglades NP 1980
## 13      1                  4333              73845     EVER Everglades NP 1981
## 14      2                  5467              75996     EVER Everglades NP 1981
## 15      3                  7647              93947     EVER Everglades NP 1981
## 16      4                  5208              63246     EVER Everglades NP 1981
## 17      5                  4585              37226     EVER Everglades NP 1981
## 18      6                  4088              23647     EVER Everglades NP 1981
## 19      7                  3748              25168     EVER Everglades NP 1981
## 20      8                  4732              28262     EVER Everglades NP 1981
## 21      9                  4287              21493     EVER Everglades NP 1981
## 22     10                  4533              29005     EVER Everglades NP 1981
## 23     11                  3983              32084     EVER Everglades NP 1981
## 24     12                  5611              60802     EVER Everglades NP 1981
## 25      1                  6622              69165     EVER Everglades NP 1982
## 26      2                  5516              81665     EVER Everglades NP 1982
## 27      3                  7969              81796     EVER Everglades NP 1982
## 28      4                  6968              56259     EVER Everglades NP 1982
## 29      5                  5739              31248     EVER Everglades NP 1982
## 30      6                  5162              18985     EVER Everglades NP 1982
## 31      7                  5103              23111     EVER Everglades NP 1982
## 32      8                  5586              29049     EVER Everglades NP 1982
## 33      9                  4921              25022     EVER Everglades NP 1982
## 34     10                  5358              33944     EVER Everglades NP 1982
## 35     11                  5327              34009     EVER Everglades NP 1982
## 36     12                  5904              65915     EVER Everglades NP 1982
## 37      1                   250              72105     EVER Everglades NP 1983
## 38      2                   220              79968     EVER Everglades NP 1983
## 39      3                   297              84433     EVER Everglades NP 1983
## 40      4                   228              59209     EVER Everglades NP 1983
## 41      5                   215              44570     EVER Everglades NP 1983
## 42      6                   126              27576     EVER Everglades NP 1983
## 43      7                    84              30348     EVER Everglades NP 1983
## 44      8                   114              26189     EVER Everglades NP 1983
## 45      9                   132              23056     EVER Everglades NP 1983
## 46     10                   284              28780     EVER Everglades NP 1983
## 47     11                   281              40683     EVER Everglades NP 1983
## 48     12                   274              60522     EVER Everglades NP 1983
## 49      1                   318              78179     EVER Everglades NP 1984
## 50      2                   412              92958     EVER Everglades NP 1984
## 51      3                   385              97997     EVER Everglades NP 1984
## 52      4                   280              71594     EVER Everglades NP 1984
## 53      5                   225              36831     EVER Everglades NP 1984
## 54      6                   248              22900     EVER Everglades NP 1984
## 55      7                   177              26928     EVER Everglades NP 1984
## 56      8                   178              28283     EVER Everglades NP 1984
## 57      9                   156              26494     EVER Everglades NP 1984
## 58     10                   292              33688     EVER Everglades NP 1984
## 59     11                   302              47202     EVER Everglades NP 1984
## 60     12                   260              65604     EVER Everglades NP 1984
## 61      1                   251              87719     EVER Everglades NP 1985
## 62      2                   304             110139     EVER Everglades NP 1985
## 63      3                   339             109046     EVER Everglades NP 1985
## 64      4                   199              76131     EVER Everglades NP 1985
## 65      5                   220              41505     EVER Everglades NP 1985
## 66      6                   238              34807     EVER Everglades NP 1985
## 67      7                   232              26379     EVER Everglades NP 1985
## 68      8                   140              28732     EVER Everglades NP 1985
## 69      9                   221              24205     EVER Everglades NP 1985
## 70     10                   343              30487     EVER Everglades NP 1985
## 71     11                   327              52152     EVER Everglades NP 1985
## 72     12                   226              76344     EVER Everglades NP 1985
## 73      1                  1067              93007     EVER Everglades NP 1986
## 74      2                  2126             112967     EVER Everglades NP 1986
## 75      3                  2532             120713     EVER Everglades NP 1986
## 76      4                  2164              98993     EVER Everglades NP 1986
## 77      5                  1924              51024     EVER Everglades NP 1986
## 78      6                  1630              25271     EVER Everglades NP 1986
## 79      7                  1671              25510     EVER Everglades NP 1986
## 80      8                  1814              31136     EVER Everglades NP 1986
## 81      9                  1809              25685     EVER Everglades NP 1986
## 82     10                  2078              32164     EVER Everglades NP 1986
## 83     11                  2014              52037     EVER Everglades NP 1986
## 84     12                  2382              70565     EVER Everglades NP 1986
## 85      1                  2506             100672     EVER Everglades NP 1987
## 86      2                  2544             107662     EVER Everglades NP 1987
## 87      3                  2669             114552     EVER Everglades NP 1987
## 88      4                  2300              84997     EVER Everglades NP 1987
## 89      5                  2371              62830     EVER Everglades NP 1987
## 90      6                  2034              38834     EVER Everglades NP 1987
## 91      7                  1985              34629     EVER Everglades NP 1987
## 92      8                  2116              37656     EVER Everglades NP 1987
## 93      9                  1894              27660     EVER Everglades NP 1987
## 94     10                  1994              34663     EVER Everglades NP 1987
## 95     11                  2176              56210     EVER Everglades NP 1987
## 96     12                  3672              87128     EVER Everglades NP 1987
## 97      1                  4021             133552     EVER Everglades NP 1988
## 98      2                  3905             164724     EVER Everglades NP 1988
## 99      3                  4458             155497     EVER Everglades NP 1988
## 100     4                  3831             120486     EVER Everglades NP 1988
## 101     5                  3148              61844     EVER Everglades NP 1988
## 102     6                  2944              46557     EVER Everglades NP 1988
## 103     7                  3035              48432     EVER Everglades NP 1988
## 104     8                  3557              53154     EVER Everglades NP 1988
## 105     9                  3480              41846     EVER Everglades NP 1988
## 106    10                  3841              49613     EVER Everglades NP 1988
## 107    11                  4163              60979     EVER Everglades NP 1988
## 108    12                  4801              89504     EVER Everglades NP 1988
## 109     1                  4935             127647     EVER Everglades NP 1989
## 110     2                  4682             137603     EVER Everglades NP 1989
## 111     3                  5607             133571     EVER Everglades NP 1989
## 112     4                  5997              84281     EVER Everglades NP 1989
## 113     5                  6036              39312     EVER Everglades NP 1989
## 114     6                  3974              44556     EVER Everglades NP 1989
## 115     7                  3526              49266     EVER Everglades NP 1989
## 116     8                  3778              51713     EVER Everglades NP 1989
## 117     9                  3339              38515     EVER Everglades NP 1989
## 118    10                  3915              51415     EVER Everglades NP 1989
## 119    11                  4332              69340     EVER Everglades NP 1989
## 120    12                  4399              86153     EVER Everglades NP 1989
## 121     1                  5223             122121     EVER Everglades NP 1990
## 122     2                  4518             131994     EVER Everglades NP 1990
## 123     3                  5120             132341     EVER Everglades NP 1990
## 124     4                  4225             111298     EVER Everglades NP 1990
## 125     5                  3314              46134     EVER Everglades NP 1990
## 126     6                  3100              46676     EVER Everglades NP 1990
## 127     7                  3177              49461     EVER Everglades NP 1990
## 128     8                  3153              54334     EVER Everglades NP 1990
## 129     9                  2572              44768     EVER Everglades NP 1990
## 130    10                  2607              48656     EVER Everglades NP 1990
## 131    11                  3170              75518     EVER Everglades NP 1990
## 132    12                  4005              94624     EVER Everglades NP 1990
## 133     1                  6350             138817     EVER Everglades NP 1991
## 134     2                  5255             149194     EVER Everglades NP 1991
## 135     3                  5762             150641     EVER Everglades NP 1991
## 136     4                  5067             110235     EVER Everglades NP 1991
## 137     5                  3762              94660     EVER Everglades NP 1991
## 138     6                  4143              68937     EVER Everglades NP 1991
## 139     7                  4121              61878     EVER Everglades NP 1991
## 140     8                  3860              71602     EVER Everglades NP 1991
## 141     9                  3599              81298     EVER Everglades NP 1991
## 142    10                  4058              86312     EVER Everglades NP 1991
## 143    11                  4586             126458     EVER Everglades NP 1991
## 144    12                  5066             151982     EVER Everglades NP 1991
## 145     1                  6623             142197     EVER Everglades NP 1992
## 146     2                  5745             163917     EVER Everglades NP 1992
## 147     3                  6518             158688     EVER Everglades NP 1992
## 148     4                  5067             126842     EVER Everglades NP 1992
## 149     5                  4095             100595     EVER Everglades NP 1992
## 150     6                  3896              59923     EVER Everglades NP 1992
## 151     7                  4011              70128     EVER Everglades NP 1992
## 152     8                  2615              59786     EVER Everglades NP 1992
## 153     9                     0               7610     EVER Everglades NP 1992
## 154    10                     0              23820     EVER Everglades NP 1992
## 155    11                     0              30644     EVER Everglades NP 1992
## 156    12                   101              81536     EVER Everglades NP 1992
## 157     1                  7386             106855     EVER Everglades NP 1993
## 158     2                  7199             119887     EVER Everglades NP 1993
## 159     3                  8078             121353     EVER Everglades NP 1993
## 160     4                  7478              96384     EVER Everglades NP 1993
## 161     5                  7178              76531     EVER Everglades NP 1993
## 162     6                  6816              62341     EVER Everglades NP 1993
## 163     7                  6752              66214     EVER Everglades NP 1993
## 164     8                  6317              61743     EVER Everglades NP 1993
## 165     9                  6773              51114     EVER Everglades NP 1993
## 166    10                  7322              58058     EVER Everglades NP 1993
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 338 rows ]</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="apis-and-iteration-week-3.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Theodore Roosevelt</span></span>
<span id="cb30-2"><a href="apis-and-iteration-week-3.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unit_visitation</span>(<span class="at">park =</span> <span class="st">&quot;THRO&quot;</span>, <span class="at">start_year =</span> <span class="st">&quot;1980&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode              UnitName Year
## 1       1                   623               7163     THRO Theodore Roosevelt NP 1980
## 2       2                   623               9360     THRO Theodore Roosevelt NP 1980
## 3       3                   623              13600     THRO Theodore Roosevelt NP 1980
## 4       4                   623              23208     THRO Theodore Roosevelt NP 1980
## 5       5                   623              45336     THRO Theodore Roosevelt NP 1980
## 6       6                   623              95326     THRO Theodore Roosevelt NP 1980
## 7       7                   623             139403     THRO Theodore Roosevelt NP 1980
## 8       8                   623             134231     THRO Theodore Roosevelt NP 1980
## 9       9                   623              58950     THRO Theodore Roosevelt NP 1980
## 10     10                   623              33584     THRO Theodore Roosevelt NP 1980
## 11     11                   623              20215     THRO Theodore Roosevelt NP 1980
## 12     12                   623              15358     THRO Theodore Roosevelt NP 1980
## 13      1                   623              12863     THRO Theodore Roosevelt NP 1981
## 14      2                   623              11869     THRO Theodore Roosevelt NP 1981
## 15      3                   623              23660     THRO Theodore Roosevelt NP 1981
## 16      4                   623              31275     THRO Theodore Roosevelt NP 1981
## 17      5                   623              47800     THRO Theodore Roosevelt NP 1981
## 18      6                   623             118774     THRO Theodore Roosevelt NP 1981
## 19      7                   623             160099     THRO Theodore Roosevelt NP 1981
## 20      8                   623             150545     THRO Theodore Roosevelt NP 1981
## 21      9                   623              73994     THRO Theodore Roosevelt NP 1981
## 22     10                   623              38338     THRO Theodore Roosevelt NP 1981
## 23     11                   623              20757     THRO Theodore Roosevelt NP 1981
## 24     12                   623              12899     THRO Theodore Roosevelt NP 1981
## 25      1                   623              11132     THRO Theodore Roosevelt NP 1982
## 26      2                   623              10927     THRO Theodore Roosevelt NP 1982
## 27      3                   623              20793     THRO Theodore Roosevelt NP 1982
## 28      4                   623              25464     THRO Theodore Roosevelt NP 1982
## 29      5                   623              46622     THRO Theodore Roosevelt NP 1982
## 30      6                   623             120067     THRO Theodore Roosevelt NP 1982
## 31      7                   623             170939     THRO Theodore Roosevelt NP 1982
## 32      8                   623             144195     THRO Theodore Roosevelt NP 1982
## 33      9                   623              71313     THRO Theodore Roosevelt NP 1982
## 34     10                   623              33194     THRO Theodore Roosevelt NP 1982
## 35     11                   623              18156     THRO Theodore Roosevelt NP 1982
## 36     12                   623               4212     THRO Theodore Roosevelt NP 1982
## 37      1                   623               3175     THRO Theodore Roosevelt NP 1983
## 38      2                   623               4303     THRO Theodore Roosevelt NP 1983
## 39      3                   623               4954     THRO Theodore Roosevelt NP 1983
## 40      4                   623              17147     THRO Theodore Roosevelt NP 1983
## 41      5                   623              33260     THRO Theodore Roosevelt NP 1983
## 42      6                   623              75517     THRO Theodore Roosevelt NP 1983
## 43      7                   623             118911     THRO Theodore Roosevelt NP 1983
## 44      8                   623             105025     THRO Theodore Roosevelt NP 1983
## 45      9                   623              42446     THRO Theodore Roosevelt NP 1983
## 46     10                   623               6556     THRO Theodore Roosevelt NP 1983
## 47     11                   623               2224     THRO Theodore Roosevelt NP 1983
## 48     12                   623               1600     THRO Theodore Roosevelt NP 1983
## 49      1                   623                308     THRO Theodore Roosevelt NP 1984
## 50      2                   623                663     THRO Theodore Roosevelt NP 1984
## 51      3                   623               2250     THRO Theodore Roosevelt NP 1984
## 52      4                   623               4341     THRO Theodore Roosevelt NP 1984
## 53      5                   623              29993     THRO Theodore Roosevelt NP 1984
## 54      6                   623              64834     THRO Theodore Roosevelt NP 1984
## 55      7                   623             101202     THRO Theodore Roosevelt NP 1984
## 56      8                   623              97898     THRO Theodore Roosevelt NP 1984
## 57      9                   623              37555     THRO Theodore Roosevelt NP 1984
## 58     10                   623              16078     THRO Theodore Roosevelt NP 1984
## 59     11                   623               4619     THRO Theodore Roosevelt NP 1984
## 60     12                   623               1398     THRO Theodore Roosevelt NP 1984
## 61      1                   434               1137     THRO Theodore Roosevelt NP 1985
## 62      2                   434               1217     THRO Theodore Roosevelt NP 1985
## 63      3                   434               3940     THRO Theodore Roosevelt NP 1985
## 64      4                   623               4273     THRO Theodore Roosevelt NP 1985
## 65      5                   623              35961     THRO Theodore Roosevelt NP 1985
## 66      6                   623              73947     THRO Theodore Roosevelt NP 1985
## 67      7                   623             101254     THRO Theodore Roosevelt NP 1985
## 68      8                   623              96851     THRO Theodore Roosevelt NP 1985
## 69      9                   623              35952     THRO Theodore Roosevelt NP 1985
## 70     10                   623              16229     THRO Theodore Roosevelt NP 1985
## 71     11                   434               4980     THRO Theodore Roosevelt NP 1985
## 72     12                   434               1411     THRO Theodore Roosevelt NP 1985
## 73      1                   434                772     THRO Theodore Roosevelt NP 1986
## 74      2                   434                573     THRO Theodore Roosevelt NP 1986
## 75      3                   434               3346     THRO Theodore Roosevelt NP 1986
## 76      4                   623               3700     THRO Theodore Roosevelt NP 1986
## 77      5                   623              31355     THRO Theodore Roosevelt NP 1986
## 78      6                   623              76456     THRO Theodore Roosevelt NP 1986
## 79      7                   623             115276     THRO Theodore Roosevelt NP 1986
## 80      8                   623             113280     THRO Theodore Roosevelt NP 1986
## 81      9                   623              34005     THRO Theodore Roosevelt NP 1986
## 82     10                   623               9507     THRO Theodore Roosevelt NP 1986
## 83     11                   434               1320     THRO Theodore Roosevelt NP 1986
## 84     12                   434                963     THRO Theodore Roosevelt NP 1986
## 85      1                   434                720     THRO Theodore Roosevelt NP 1987
## 86      2                   434                713     THRO Theodore Roosevelt NP 1987
## 87      3                   434               5767     THRO Theodore Roosevelt NP 1987
## 88      4                   623              13479     THRO Theodore Roosevelt NP 1987
## 89      5                   623              31685     THRO Theodore Roosevelt NP 1987
## 90      6                   623              77864     THRO Theodore Roosevelt NP 1987
## 91      7                   623             115896     THRO Theodore Roosevelt NP 1987
## 92      8                   623             111272     THRO Theodore Roosevelt NP 1987
## 93      9                   623              45217     THRO Theodore Roosevelt NP 1987
## 94     10                   623              16463     THRO Theodore Roosevelt NP 1987
## 95     11                   434               4318     THRO Theodore Roosevelt NP 1987
## 96     12                   434               1452     THRO Theodore Roosevelt NP 1987
## 97      1                   434                976     THRO Theodore Roosevelt NP 1988
## 98      2                   434               1536     THRO Theodore Roosevelt NP 1988
## 99      3                   434               3122     THRO Theodore Roosevelt NP 1988
## 100     4                   623              10509     THRO Theodore Roosevelt NP 1988
## 101     5                   623              32945     THRO Theodore Roosevelt NP 1988
## 102     6                   623              74553     THRO Theodore Roosevelt NP 1988
## 103     7                   623             113439     THRO Theodore Roosevelt NP 1988
## 104     8                   623             103574     THRO Theodore Roosevelt NP 1988
## 105     9                   623              46566     THRO Theodore Roosevelt NP 1988
## 106    10                   623              19343     THRO Theodore Roosevelt NP 1988
## 107    11                   434               5425     THRO Theodore Roosevelt NP 1988
## 108    12                   434               1539     THRO Theodore Roosevelt NP 1988
## 109     1                   434               1243     THRO Theodore Roosevelt NP 1989
## 110     2                   434                835     THRO Theodore Roosevelt NP 1989
## 111     3                   434               7436     THRO Theodore Roosevelt NP 1989
## 112     4                   623              14956     THRO Theodore Roosevelt NP 1989
## 113     5                   623              36527     THRO Theodore Roosevelt NP 1989
## 114     6                   623              87021     THRO Theodore Roosevelt NP 1989
## 115     7                   623             120566     THRO Theodore Roosevelt NP 1989
## 116     8                   623             111204     THRO Theodore Roosevelt NP 1989
## 117     9                   623              47975     THRO Theodore Roosevelt NP 1989
## 118    10                   623              20252     THRO Theodore Roosevelt NP 1989
## 119    11                   434               9516     THRO Theodore Roosevelt NP 1989
## 120    12                   434               1640     THRO Theodore Roosevelt NP 1989
## 121     1                   434               1044     THRO Theodore Roosevelt NP 1990
## 122     2                   434               1339     THRO Theodore Roosevelt NP 1990
## 123     3                   434               3636     THRO Theodore Roosevelt NP 1990
## 124     4                   623              16226     THRO Theodore Roosevelt NP 1990
## 125     5                   623              39255     THRO Theodore Roosevelt NP 1990
## 126     6                   623              88320     THRO Theodore Roosevelt NP 1990
## 127     7                   623             131586     THRO Theodore Roosevelt NP 1990
## 128     8                   623             118057     THRO Theodore Roosevelt NP 1990
## 129     9                   623              46139     THRO Theodore Roosevelt NP 1990
## 130    10                   623               9207     THRO Theodore Roosevelt NP 1990
## 131    11                   434               4326     THRO Theodore Roosevelt NP 1990
## 132    12                   434               1583     THRO Theodore Roosevelt NP 1990
## 133     1                   434               1387     THRO Theodore Roosevelt NP 1991
## 134     2                   434               1462     THRO Theodore Roosevelt NP 1991
## 135     3                   434               4332     THRO Theodore Roosevelt NP 1991
## 136     4                   623              13501     THRO Theodore Roosevelt NP 1991
## 137     5                   623              34713     THRO Theodore Roosevelt NP 1991
## 138     6                   623              83363     THRO Theodore Roosevelt NP 1991
## 139     7                   623             127724     THRO Theodore Roosevelt NP 1991
## 140     8                   623             129336     THRO Theodore Roosevelt NP 1991
## 141     9                   623              45886     THRO Theodore Roosevelt NP 1991
## 142    10                   623              20626     THRO Theodore Roosevelt NP 1991
## 143    11                   434               5220     THRO Theodore Roosevelt NP 1991
## 144    12                   434               1376     THRO Theodore Roosevelt NP 1991
## 145     1                   417                909     THRO Theodore Roosevelt NP 1992
## 146     2                   417               1026     THRO Theodore Roosevelt NP 1992
## 147     3                   472               3663     THRO Theodore Roosevelt NP 1992
## 148     4                   622              15052     THRO Theodore Roosevelt NP 1992
## 149     5                   623              35418     THRO Theodore Roosevelt NP 1992
## 150     6                   623              82069     THRO Theodore Roosevelt NP 1992
## 151     7                   622             134524     THRO Theodore Roosevelt NP 1992
## 152     8                   621             130518     THRO Theodore Roosevelt NP 1992
## 153     9                   624              47515     THRO Theodore Roosevelt NP 1992
## 154    10                   482              20176     THRO Theodore Roosevelt NP 1992
## 155    11                   472               4435     THRO Theodore Roosevelt NP 1992
## 156    12                   417                632     THRO Theodore Roosevelt NP 1992
## 157     1                   417                748     THRO Theodore Roosevelt NP 1993
## 158     2                   417                814     THRO Theodore Roosevelt NP 1993
## 159     3                   472               2212     THRO Theodore Roosevelt NP 1993
## 160     4                   622              14042     THRO Theodore Roosevelt NP 1993
## 161     5                   623              37693     THRO Theodore Roosevelt NP 1993
## 162     6                   623              80340     THRO Theodore Roosevelt NP 1993
## 163     7                   622             125177     THRO Theodore Roosevelt NP 1993
## 164     8                   621             136519     THRO Theodore Roosevelt NP 1993
## 165     9                   624              49363     THRO Theodore Roosevelt NP 1993
## 166    10                   482              22456     THRO Theodore Roosevelt NP 1993
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 338 rows ]</code></pre>
</div>
</div>
<div id="iterations" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Iterations<a href="apis-and-iteration-week-3.html#iterations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At this point, we now know how to develop functions so that we do not have to keep writing out redundant steps in a workflow. However, in that last exercise, you can see that we are <em>still</em> writing out redundant code; we are performing the exact same function on each of our three park units.</p>
<p>Another tool for reducing redundancy is <strong>iteration</strong>, which allows you to do the same thing on multiple inputs. Iteration can happen across different objects, different rows, different data frames, the list goes on and on!</p>
<div id="for-loops" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> For loops<a href="apis-and-iteration-week-3.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <code>for</code> loop is base R’s iteration tool that executes code across a vector, an array, a list, etc. To save the outcome of each iteration, you must first create a vector to store the outputs in that is sized based on how many objects you want to iterate over. For example, I want to run our <code>parkwide_visitation()</code> function over the last five years: 2017, 2018, 2019, 2020, and 2021. To do that, I will first need to develop a vector listing each year:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="apis-and-iteration-week-3.html#cb32-1" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;2017&#39;</span>, <span class="st">&#39;2018&#39;</span>, <span class="st">&#39;2019&#39;</span>, <span class="st">&#39;2020&#39;</span>, <span class="st">&#39;2021&#39;</span>)</span></code></pre></div>
<p>… and then develop an empty list to store each year’s <code>parkwide_visitation()</code> results (i.e., output) into:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="apis-and-iteration-week-3.html#cb33-1" aria-hidden="true" tabindex="-1"></a>output_floop <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(years))</span></code></pre></div>
<p>Now that we have a place to store each year’s function results, we can move forward with the for loop itself:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="apis-and-iteration-week-3.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(years)){</span>
<span id="cb34-2"><a href="apis-and-iteration-week-3.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-3"><a href="apis-and-iteration-week-3.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  output_floop[[i]] <span class="ot">&lt;-</span></span>
<span id="cb34-4"><a href="apis-and-iteration-week-3.html#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> years[i])</span>
<span id="cb34-5"><a href="apis-and-iteration-week-3.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-6"><a href="apis-and-iteration-week-3.html#cb34-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>… where <code>years[i]</code> tells the <code>for</code> loop to perform <code>parkwide_visitation()</code> on the <em>i<sup>th</sup></em> year (think of <em>i</em> as a moving across each year), and <code>output_floop[[i]]</code> directs the <code>for</code> loop to store the results of the <em>i<sup>th</sup></em> year’s run into <code>output</code>’s <em>i<sup>th</sup></em> list (think of <code>output_floop[[i]]</code> as the location in <code>output_floop</code> that the <em>i<sup>th</sup></em>’s results go).</p>
<p>We now have a list containing five data frames: one for each year of visitation data:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="apis-and-iteration-week-3.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(output_floop)</span></code></pre></div>
<pre><code>##      Length Class      Mode
## [1,] 6      data.frame list
## [2,] 6      data.frame list
## [3,] 6      data.frame list
## [4,] 6      data.frame list
## [5,] 6      data.frame list</code></pre>
<p>Because each year’s output is structured identically, we can confidently combine each year’s data frame into a single data frame using <code>dplyr::bind_rows()</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="apis-and-iteration-week-3.html#cb37-1" aria-hidden="true" tabindex="-1"></a>multi_years <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(output_floop)</span></code></pre></div>
</div>
<div id="exercise-6" class="section level3 hasAnchor" number="1.4.2" style="color: maroon">
<h3><span class="header-section-number">1.4.2</span> Exercise #6<a href="apis-and-iteration-week-3.html#exercise-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Use a for loop to run <code>unit_visitation()</code> with arguments <code>start_year = 1980</code> and <code>end_year = 2021</code> across ROMO, EVER, and THRO. Then, create a single data frame containing each park units’ output. (Hint: Your first step will be to create a vector listing each park unit.)</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="apis-and-iteration-week-3.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vector list of parks</span></span>
<span id="cb38-2"><a href="apis-and-iteration-week-3.html#cb38-2" aria-hidden="true" tabindex="-1"></a>parks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;ROMO&#39;</span>, <span class="st">&#39;EVER&#39;</span>, <span class="st">&#39;THRO&#39;</span>)</span>
<span id="cb38-3"><a href="apis-and-iteration-week-3.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="apis-and-iteration-week-3.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># my empty list</span></span>
<span id="cb38-5"><a href="apis-and-iteration-week-3.html#cb38-5" aria-hidden="true" tabindex="-1"></a>output_doop <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(parks))</span>
<span id="cb38-6"><a href="apis-and-iteration-week-3.html#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="apis-and-iteration-week-3.html#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the &#39;for&#39; loop</span></span>
<span id="cb38-8"><a href="apis-and-iteration-week-3.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(parks)){</span>
<span id="cb38-9"><a href="apis-and-iteration-week-3.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-10"><a href="apis-and-iteration-week-3.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  output_doop[[i]] <span class="ot">&lt;-</span></span>
<span id="cb38-11"><a href="apis-and-iteration-week-3.html#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unit_visitation</span>(<span class="at">park =</span> parks[i], <span class="at">start_year =</span> <span class="st">&quot;1980&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>)</span>
<span id="cb38-12"><a href="apis-and-iteration-week-3.html#cb38-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-13"><a href="apis-and-iteration-week-3.html#cb38-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-14"><a href="apis-and-iteration-week-3.html#cb38-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="apis-and-iteration-week-3.html#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(output_doop)</span></code></pre></div>
<pre><code>##      Length Class      Mode
## [1,] 6      data.frame list
## [2,] 6      data.frame list
## [3,] 6      data.frame list</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="apis-and-iteration-week-3.html#cb40-1" aria-hidden="true" tabindex="-1"></a>multi_parks <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(output_doop)</span>
<span id="cb40-2"><a href="apis-and-iteration-week-3.html#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="apis-and-iteration-week-3.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(multi_parks)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1512 obs. of  6 variables:
##  $ Month                : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ NonRecreationVisitors: int  28 44 24 142 98 2384 3748 3634 1472 532 ...
##  $ RecreationVisitors   : int  42902 59403 58790 64299 93210 410449 573465 609383 389771 219495 ...
##  $ UnitCode             : chr  &quot;ROMO&quot; &quot;ROMO&quot; &quot;ROMO&quot; &quot;ROMO&quot; ...
##  $ UnitName             : chr  &quot;Rocky Mountain NP&quot; &quot;Rocky Mountain NP&quot; &quot;Rocky Mountain NP&quot; &quot;Rocky Mountain NP&quot; ...
##  $ Year                 : int  1980 1980 1980 1980 1980 1980 1980 1980 1980 1980 ...</code></pre>
</div>
</div>
<div id="mapping" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Mapping<a href="apis-and-iteration-week-3.html#mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>tidyverse</code>’s <code>purrr</code> package has its own iteration function, <code>map()</code>, that is a variation of the <code>for</code> loop. <code>map()</code> takes a vector and applies a single function across it, then automatically stores all of the results into a list. In other words, <code>map()</code> creates an appropriately sized list to store our results in for us. This eliminates the need to create an empty list ahead of time.</p>
<p>To create the same output as our previous <code>for</code> loop on <code>parkwide_visitation()</code>, but using <code>map()</code> instead, we would run the following code:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="apis-and-iteration-week-3.html#cb42-1" aria-hidden="true" tabindex="-1"></a>output_map <span class="ot">&lt;-</span> years <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="apis-and-iteration-week-3.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> .))</span></code></pre></div>
<p>… where <code>~</code> indicates that we want to perform <code>parkwide_visitation()</code> across all years, and <code>.</code> indicates that we want to use our piped vector, <code>years</code>, as the input to the <code>year</code> argument. As you can see, <code>output_map</code> is identical to <code>output_floop</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="apis-and-iteration-week-3.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(output_floop, output_map)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>… which means we should also <code>bind_rows()</code> to get the mapped output into a single data frame:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="apis-and-iteration-week-3.html#cb45-1" aria-hidden="true" tabindex="-1"></a>multi_years <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(output_map)</span></code></pre></div>
<div id="exercise-7" class="section level3 hasAnchor" number="1.5.1" style="color: maroon">
<h3><span class="header-section-number">1.5.1</span> Exercise #7<a href="apis-and-iteration-week-3.html#exercise-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Use <code>map()</code> to run <code>unit_visitation()</code> with arguments <code>start_year = 1980</code> and <code>end_year = 2021</code> across ROMO, EVER, and THRO. Then, create a single data frame containing each park units’ output.</strong></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="apis-and-iteration-week-3.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create the output map</span></span>
<span id="cb46-2"><a href="apis-and-iteration-week-3.html#cb46-2" aria-hidden="true" tabindex="-1"></a>unit_output_map <span class="ot">&lt;-</span> parks <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="apis-and-iteration-week-3.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">unit_visitation</span>(<span class="at">park =</span> ., <span class="at">start_year =</span> <span class="st">&quot;1980&quot;</span>, <span class="at">end_year =</span> <span class="st">&quot;2021&quot;</span>))</span>
<span id="cb46-4"><a href="apis-and-iteration-week-3.html#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="apis-and-iteration-week-3.html#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># check if they are identical</span></span>
<span id="cb46-6"><a href="apis-and-iteration-week-3.html#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(output_doop, unit_output_map) <span class="co">#TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="apis-and-iteration-week-3.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bind_rows</span></span>
<span id="cb48-2"><a href="apis-and-iteration-week-3.html#cb48-2" aria-hidden="true" tabindex="-1"></a>multi_parks <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(unit_output_map)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-munging-week-3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
